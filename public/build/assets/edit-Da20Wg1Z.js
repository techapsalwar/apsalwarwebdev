import{c as Ze,u as es,j as s,H as ss,L as We}from"./app-lLew-mq0.js";import{A as ts}from"./app-layout-KzQEyLiQ.js";import{B as Y}from"./button-DTZ67Z4b.js";import{I as Z}from"./input-C9VfnsW_.js";import{L as d}from"./label-BTNSqOD-.js";import{C as ls}from"./checkbox-DrTTb7Zo.js";import{S as is}from"./switch-CGXN52OW.js";import{c as Ve,C as Oe,a as qe,b as Je,d as Ke}from"./card-DWcOyhKP.js";import{d as rs,c as as,S as os,b as ns,a as cs}from"./select-QGsFE1Nt.js";import{S as ke}from"./separator-CX_6Iv6y.js";import{S as ms}from"./x-CV1yhBJZ.js";import{A as ds}from"./arrow-left-Bw3DDjFc.js";import{U as ps}from"./user-cog-BbcEhmJc.js";import{S as hs}from"./save-D77rFDZ-.js";/* empty css            */import"./index-BiNrCjIr.js";import"./index-CMRMG5Mo.js";import"./index-B9jue-Th.js";import"./index-CZQ422QV.js";import"./Combination-BEW_kzWa.js";import"./index-BzAksq8r.js";import"./index-BOY9t191.js";import"./index-CxACbU5U.js";import"./index-C7YjzNVQ.js";import"./index-DI1PiJH0.js";import"./index-CbiHmYlh.js";import"./index-DTTikWjI.js";import"./avatar-DYrdvPax.js";import"./index-BTFUtR64.js";import"./index-DHA2i0B2.js";import"./image-CHvhAmHJ.js";import"./link-D-JBfegL.js";import"./quote-DLUiA_F1.js";import"./newspaper-D3mdqZcT.js";import"./megaphone-BG2hP5oS.js";import"./indian-rupee-Bj1qYK0P.js";import"./file-check-UDYRRxCK.js";import"./folder-l-97kfum.js";import"./handshake-V1wEucA7.js";import"./school-BjNRgEiN.js";import"./index-t_bT_gQV.js";import"./check-DGLhpy4l.js";import"./chevron-up-Bv-H0xE7.js";function ot(o){const e=Ze.c(155),{user:i,roles:Ae,permissions:Le,groupedModules:p}=o,De=i.phone||"";let ee;e[0]!==De||e[1]!==i.all_permissions||e[2]!==i.email||e[3]!==i.is_active||e[4]!==i.name||e[5]!==i.role?(ee={name:i.name,email:i.email,password:"",password_confirmation:"",phone:De,role:i.role,permissions:i.all_permissions,is_active:i.is_active},e[0]=De,e[1]=i.all_permissions,e[2]=i.email,e[3]=i.is_active,e[4]=i.name,e[5]=i.role,e[6]=ee):ee=e[6];const{data:t,setData:l,put:Pe,processing:se,errors:a}=es(ee);let te;e[7]!==Pe||e[8]!==i.id?(te=r=>{r.preventDefault(),Pe(`/admin/users/${i.id}`)},e[7]=Pe,e[8]=i.id,e[9]=te):te=e[9];const Ue=te;let le;e[10]!==t.permissions||e[11]!==l?(le=r=>{l("permissions",t.permissions.includes(r)?t.permissions.filter(n=>n!==r):[...t.permissions,r])},e[10]=t.permissions,e[11]=l,e[12]=le):le=e[12];const Fe=le;let ie;e[13]!==t.permissions||e[14]!==p||e[15]!==l?(ie=r=>{const n=p[r].map(js);n.every(m=>t.permissions.includes(m))?l("permissions",t.permissions.filter(m=>!n.includes(m))):l("permissions",[...new Set([...t.permissions,...n])])},e[13]=t.permissions,e[14]=p,e[15]=l,e[16]=ie):ie=e[16];const Ee=ie;let re;e[17]!==Le||e[18]!==l?(re=()=>{l("permissions",Le)},e[17]=Le,e[18]=l,e[19]=re):re=e[19];const Ie=re;let ae;e[20]!==l?(ae=()=>{l("permissions",[])},e[20]=l,e[21]=ae):ae=e[21];const ze=ae,h=t.role==="super_admin",Me=`Edit User: ${i.name}`;let f;e[22]!==Me?(f=s.jsx(ss,{title:Me}),e[22]=Me,e[23]=f):f=e[23];let oe;e[24]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(We,{href:"/admin/users",children:s.jsx(ds,{className:"h-4 w-4"})})}),e[24]=oe):oe=e[24];let ne;e[25]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsxs("div",{className:"flex items-center gap-4",children:[oe,s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(ps,{className:"h-6 w-6"}),"Edit User"]}),s.jsx("p",{className:"text-muted-foreground",children:"Update user details and permissions"})]})]}),e[25]=ne):ne=e[25];let ce;e[26]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsxs(Oe,{children:[s.jsx(qe,{children:"User Information"}),s.jsx(Je,{children:"Basic details about the user"})]}),e[26]=ce):ce=e[26];let me;e[27]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(d,{htmlFor:"name",children:"Full Name *"}),e[27]=me):me=e[27];let x;e[28]!==l?(x=r=>l("name",r.target.value),e[28]=l,e[29]=x):x=e[29];const Re=a.name?"border-red-500":"";let u;e[30]!==t.name||e[31]!==x||e[32]!==Re?(u=s.jsx(Z,{id:"name",value:t.name,onChange:x,className:Re}),e[30]=t.name,e[31]=x,e[32]=Re,e[33]=u):u=e[33];let j;e[34]!==a.name?(j=a.name&&s.jsx("p",{className:"text-sm text-red-500",children:a.name}),e[34]=a.name,e[35]=j):j=e[35];let _;e[36]!==u||e[37]!==j?(_=s.jsxs("div",{className:"space-y-2",children:[me,u,j]}),e[36]=u,e[37]=j,e[38]=_):_=e[38];let de;e[39]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(d,{htmlFor:"email",children:"Email Address *"}),e[39]=de):de=e[39];let g;e[40]!==l?(g=r=>l("email",r.target.value),e[40]=l,e[41]=g):g=e[41];const $e=a.email?"border-red-500":"";let v;e[42]!==t.email||e[43]!==g||e[44]!==$e?(v=s.jsx(Z,{id:"email",type:"email",value:t.email,onChange:g,className:$e}),e[42]=t.email,e[43]=g,e[44]=$e,e[45]=v):v=e[45];let y;e[46]!==a.email?(y=a.email&&s.jsx("p",{className:"text-sm text-red-500",children:a.email}),e[46]=a.email,e[47]=y):y=e[47];let N;e[48]!==v||e[49]!==y?(N=s.jsxs("div",{className:"space-y-2",children:[de,v,y]}),e[48]=v,e[49]=y,e[50]=N):N=e[50];let pe;e[51]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e[51]=pe):pe=e[51];let b;e[52]!==l?(b=r=>l("phone",r.target.value),e[52]=l,e[53]=b):b=e[53];let S;e[54]!==t.phone||e[55]!==b?(S=s.jsxs("div",{className:"space-y-2",children:[pe,s.jsx(Z,{id:"phone",value:t.phone,onChange:b,placeholder:"+91 98765 43210"})]}),e[54]=t.phone,e[55]=b,e[56]=S):S=e[56];let he;e[57]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(ke,{}),e[57]=he):he=e[57];let fe;e[58]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(d,{htmlFor:"password",children:"New Password"}),e[58]=fe):fe=e[58];let w;e[59]!==l?(w=r=>l("password",r.target.value),e[59]=l,e[60]=w):w=e[60];const Be=a.password?"border-red-500":"";let C;e[61]!==t.password||e[62]!==w||e[63]!==Be?(C=s.jsx(Z,{id:"password",type:"password",value:t.password,onChange:w,placeholder:"Leave blank to keep current password",className:Be}),e[61]=t.password,e[62]=w,e[63]=Be,e[64]=C):C=e[64];let k;e[65]!==a.password?(k=a.password&&s.jsx("p",{className:"text-sm text-red-500",children:a.password}),e[65]=a.password,e[66]=k):k=e[66];let A;e[67]!==C||e[68]!==k?(A=s.jsxs("div",{className:"space-y-2",children:[fe,C,k]}),e[67]=C,e[68]=k,e[69]=A):A=e[69];let xe;e[70]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(d,{htmlFor:"password_confirmation",children:"Confirm New Password"}),e[70]=xe):xe=e[70];let L;e[71]!==l?(L=r=>l("password_confirmation",r.target.value),e[71]=l,e[72]=L):L=e[72];let D;e[73]!==t.password_confirmation||e[74]!==L?(D=s.jsxs("div",{className:"space-y-2",children:[xe,s.jsx(Z,{id:"password_confirmation",type:"password",value:t.password_confirmation,onChange:L,placeholder:"Leave blank to keep current password"})]}),e[73]=t.password_confirmation,e[74]=L,e[75]=D):D=e[75];let P;e[76]!==_||e[77]!==N||e[78]!==S||e[79]!==A||e[80]!==D?(P=s.jsxs(Ve,{children:[ce,s.jsxs(Ke,{className:"space-y-4",children:[_,N,S,he,A,D]})]}),e[76]=_,e[77]=N,e[78]=S,e[79]=A,e[80]=D,e[81]=P):P=e[81];let ue;e[82]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsxs(Oe,{children:[s.jsx(qe,{children:"Role & Status"}),s.jsx(Je,{children:"Manage role and account status"})]}),e[82]=ue):ue=e[82];let je;e[83]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(d,{htmlFor:"role",children:"Role *"}),e[83]=je):je=e[83];const Xe=t.role;let U;e[84]!==l?(U=r=>l("role",r),e[84]=l,e[85]=U):U=e[85];const He=a.role?"border-red-500":"";let _e;e[86]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(rs,{placeholder:"Select a role"}),e[86]=_e):_e=e[86];let F;e[87]!==He?(F=s.jsx(as,{className:He,children:_e}),e[87]=He,e[88]=F):F=e[88];let E;e[89]!==Ae?(E=Ae.map(xs),e[89]=Ae,e[90]=E):E=e[90];let I;e[91]!==E?(I=s.jsx(os,{children:E}),e[91]=E,e[92]=I):I=e[92];let z;e[93]!==t.role||e[94]!==U||e[95]!==F||e[96]!==I?(z=s.jsxs(ns,{value:Xe,onValueChange:U,children:[F,I]}),e[93]=t.role,e[94]=U,e[95]=F,e[96]=I,e[97]=z):z=e[97];let M;e[98]!==a.role?(M=a.role&&s.jsx("p",{className:"text-sm text-red-500",children:a.role}),e[98]=a.role,e[99]=M):M=e[99];let R;e[100]!==h?(R=h&&s.jsx("p",{className:"text-sm text-amber-600",children:"⚠️ Super Admin has full access to all modules"}),e[100]=h,e[101]=R):R=e[101];let $;e[102]!==z||e[103]!==M||e[104]!==R?($=s.jsxs("div",{className:"space-y-2",children:[je,z,M,R]}),e[102]=z,e[103]=M,e[104]=R,e[105]=$):$=e[105];let ge;e[106]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(ke,{}),e[106]=ge):ge=e[106];let ve;e[107]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(d,{children:"Account Status"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"User can only login if active"})]}),e[107]=ve):ve=e[107];let B;e[108]!==l?(B=r=>l("is_active",r),e[108]=l,e[109]=B):B=e[109];let H;e[110]!==t.is_active||e[111]!==B?(H=s.jsxs("div",{className:"flex items-center justify-between",children:[ve,s.jsx(is,{checked:t.is_active,onCheckedChange:B})]}),e[110]=t.is_active,e[111]=B,e[112]=H):H=e[112];let ye;e[113]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(ke,{}),e[113]=ye):ye=e[113];let Ne;e[114]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx("span",{className:"font-medium",children:"Created:"}),e[114]=Ne):Ne=e[114];let G;e[115]!==i.created_at?(G=new Date(i.created_at).toLocaleDateString(),e[115]=i.created_at,e[116]=G):G=e[116];let T;e[117]!==G?(T=s.jsxs("p",{children:[Ne," ",G]}),e[117]=G,e[118]=T):T=e[118];let be;e[119]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx("span",{className:"font-medium",children:"Last Login:"}),e[119]=be):be=e[119];let V;e[120]!==i.last_login_at?(V=i.last_login_at?new Date(i.last_login_at).toLocaleDateString():"Never",e[120]=i.last_login_at,e[121]=V):V=e[121];let O;e[122]!==V?(O=s.jsxs("p",{children:[be," ",V]}),e[122]=V,e[123]=O):O=e[123];let q;e[124]!==T||e[125]!==O?(q=s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[T,O]}),e[124]=T,e[125]=O,e[126]=q):q=e[126];let J;e[127]!==$||e[128]!==H||e[129]!==q?(J=s.jsxs(Ve,{children:[ue,s.jsxs(Ke,{className:"space-y-4",children:[$,ge,H,ye,q]})]}),e[127]=$,e[128]=H,e[129]=q,e[130]=J):J=e[130];let K;e[131]!==P||e[132]!==J?(K=s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[P,J]}),e[131]=P,e[132]=J,e[133]=K):K=e[133];let Q;e[134]!==t.permissions||e[135]!==ze||e[136]!==p||e[137]!==h||e[138]!==Ie||e[139]!==Ee||e[140]!==Fe?(Q=!h&&s.jsxs(Ve,{children:[s.jsx(Oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(ms,{className:"h-5 w-5"}),"Module Permissions"]}),s.jsx(Je,{children:"Select which admin modules this user can access"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:Ie,children:"Select All"}),s.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:ze,children:"Deselect All"})]})]})}),s.jsx(Ke,{children:s.jsx("div",{className:"space-y-6",children:Object.entries(p).map(r=>{const[n,Te]=r,m=Te.map(fs),Qe=m.filter(c=>t.permissions.includes(c)).length,Ye=Qe===m.length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:[n,s.jsxs("span",{className:"ml-2 text-xs font-normal",children:["(",Qe,"/",m.length,")"]})]}),s.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ee(n),children:Ye?"Deselect All":"Select All"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Te.map(c=>s.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${t.permissions.includes(c.key)?"bg-primary/5 border-primary":"hover:bg-muted/50"}`,children:[s.jsx(ls,{checked:t.permissions.includes(c.key),onCheckedChange:()=>Fe(c.key)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm",children:c.name}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:c.description})]})]},c.key))}),s.jsx(ke,{})]},n)})})})]}),e[134]=t.permissions,e[135]=ze,e[136]=p,e[137]=h,e[138]=Ie,e[139]=Ee,e[140]=Fe,e[141]=Q):Q=e[141];let Se;e[142]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsx(We,{href:"/admin/users",children:"Cancel"})}),e[142]=Se):Se=e[142];let we;e[143]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(hs,{className:"mr-2 h-4 w-4"}),e[143]=we):we=e[143];const Ge=se?"Saving...":"Save Changes";let W;e[144]!==se||e[145]!==Ge?(W=s.jsxs("div",{className:"flex justify-end gap-4",children:[Se,s.jsxs(Y,{type:"submit",disabled:se,children:[we,Ge]})]}),e[144]=se,e[145]=Ge,e[146]=W):W=e[146];let X;e[147]!==Ue||e[148]!==K||e[149]!==Q||e[150]!==W?(X=s.jsxs("div",{className:"space-y-6",children:[ne,s.jsxs("form",{onSubmit:Ue,className:"space-y-6",children:[K,Q,W]})]}),e[147]=Ue,e[148]=K,e[149]=Q,e[150]=W,e[151]=X):X=e[151];let Ce;return e[152]!==X||e[153]!==f?(Ce=s.jsxs(ts,{children:[f,X]}),e[152]=X,e[153]=f,e[154]=Ce):Ce=e[154],Ce}function fs(o){return o.key}function xs(o){return s.jsx(cs,{value:o.name,children:o.name.replace("_"," ").replace(/\b\w/g,us)},o.id)}function us(o){return o.toUpperCase()}function js(o){return o.key}export{ot as default};
