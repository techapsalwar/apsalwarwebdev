import{c as de,r as me,j as s,L as T,a as D,H as he}from"./app-Cmq9oDGi.js";import{A as fe}from"./app-layout-DoVO_vzw.js";import{B as a}from"./button-Cf4oe_XG.js";import{C as xe,a as je,c as Q,d as W}from"./card-X8yrq1E7.js";import{I as pe}from"./input-CJJo5L_5.js";import{c as Y,d as Z,a as w,S as ee,b as se}from"./select-MDq58P37.js";import{B as te}from"./badge-B7t43j3u.js";import{b as K,e as n,a as ue,c,T as ge,d as _e}from"./table-DxHlWMmR.js";import{A as be,a as ve,b as Ce,c as Ne,d as Se,e as ye,f as Te,g as we,h as De}from"./alert-dialog-D5vPuSRT.js";import{C as re}from"./circle-check-big-BhbhOSiW.js";import{C as le}from"./circle-x-0p27yKlC.js";import{D as Ae}from"./download-rOHPEB1N.js";import{S as ke}from"./square-pen-BIQygcGa.js";import{T as Be}from"./trash-2-DfEL4ZSA.js";import{F as Fe}from"./file-check-Cs6It4z_.js";import{U as He}from"./upload-BhALOVoL.js";import{P as Ie}from"./plus-CX2v85UT.js";import{S as Pe}from"./search-CM4xpWys.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./x-HfyhX8Ju.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./image-DO4yfKR-.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";import"./index-CJgzQKWL.js";import"./chevron-up-08YVdQiA.js";import"./check-z4pC7DcM.js";function Is(r){const e=de.c(59),{tcRecords:l,filters:i,classes:q}=r,[o,ae]=me.useState(i.search||"");let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A=[{title:"Dashboard",href:"/dashboard"},{title:"Transfer Certificates",href:"/admin/tc-records"}],e[0]=A):A=e[0];const ie=A;let k;e[1]!==i||e[2]!==o?(k=t=>{t.preventDefault(),D.get("/admin/tc-records",{...i,search:o},{preserveState:!0})},e[1]=i,e[2]=o,e[3]=k):k=e[3];const X=k;let B;e[4]!==i?(B=(t,O)=>{D.get("/admin/tc-records",{...i,[t]:O==="all"?void 0:O},{preserveState:!0})},e[4]=i,e[5]=B):B=e[5];const d=B,ne=Re,ce=Me,oe=Le;let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(he,{title:"Transfer Certificates Management"}),e[6]=F):F=e[6];let H;e[7]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(Fe,{className:"h-6 w-6"}),"Transfer Certificates"]}),s.jsx("p",{className:"text-gray-500",children:"Manage transfer certificate records and PDF files"})]}),e[7]=H):H=e[7];let I;e[8]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(a,{asChild:!0,variant:"outline",children:s.jsxs(T,{href:"/admin/tc-records/bulk-upload",children:[s.jsx(He,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]})}),e[8]=I):I=e[8];let P;e[9]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[H,s.jsxs("div",{className:"flex gap-2",children:[I,s.jsx(a,{asChild:!0,children:s.jsxs(T,{href:"/admin/tc-records/create",children:[s.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Add TC"]})})]})]}),e[9]=P):P=e[9];let V;e[10]===Symbol.for("react.memo_cache_sentinel")?(V=t=>ae(t.target.value),e[10]=V):V=e[10];let m;e[11]!==o?(m=s.jsx(pe,{placeholder:"Search by name, TC number, or admission number...",value:o,onChange:V,className:"flex-1"}),e[11]=o,e[12]=m):m=e[12];let z;e[13]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(a,{type:"submit",variant:"secondary",children:s.jsx(Pe,{className:"h-4 w-4"})}),e[13]=z):z=e[13];let h;e[14]!==X||e[15]!==m?(h=s.jsxs("form",{onSubmit:X,className:"flex-1 flex gap-2",children:[m,z]}),e[14]=X,e[15]=m,e[16]=h):h=e[16];const G=i.class||"all";let f;e[17]!==d?(f=t=>d("class",t),e[17]=d,e[18]=f):f=e[18];let L;e[19]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(Y,{className:"w-[150px]",children:s.jsx(Z,{placeholder:"Class"})}),e[19]=L):L=e[19];let M;e[20]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(w,{value:"all",children:"All Classes"}),e[20]=M):M=e[20];let x;e[21]!==q?(x=q.map(ze),e[21]=q,e[22]=x):x=e[22];let j;e[23]!==x?(j=s.jsxs(ee,{children:[M,x]}),e[23]=x,e[24]=j):j=e[24];let p;e[25]!==G||e[26]!==f||e[27]!==j?(p=s.jsxs(se,{value:G,onValueChange:f,children:[L,j]}),e[25]=G,e[26]=f,e[27]=j,e[28]=p):p=e[28];const J=i.is_verified||"all";let u;e[29]!==d?(u=t=>d("is_verified",t),e[29]=d,e[30]=u):u=e[30];let R;e[31]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(Y,{className:"w-[150px]",children:s.jsx(Z,{placeholder:"Status"})}),e[31]=R):R=e[31];let U;e[32]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(ee,{children:[s.jsx(w,{value:"all",children:"All Status"}),s.jsx(w,{value:"true",children:"Verified"}),s.jsx(w,{value:"false",children:"Unverified"})]}),e[32]=U):U=e[32];let g;e[33]!==J||e[34]!==u?(g=s.jsxs(se,{value:J,onValueChange:u,children:[R,U]}),e[33]=J,e[34]=u,e[35]=g):g=e[35];let _;e[36]!==h||e[37]!==p||e[38]!==g?(_=s.jsx(Q,{children:s.jsx(W,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h,p,g]})})}),e[36]=h,e[37]=p,e[38]=g,e[39]=_):_=e[39];let b;e[40]!==l.total?(b=s.jsx(xe,{children:s.jsxs(je,{children:["All Transfer Certificates (",l.total,")"]})}),e[40]=l.total,e[41]=b):b=e[41];let $;e[42]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(ue,{children:s.jsxs(K,{children:[s.jsx(c,{children:"TC Number"}),s.jsx(c,{children:"Student Name"}),s.jsx(c,{children:"Father's Name"}),s.jsx(c,{children:"Admission No."}),s.jsx(c,{children:"Class"}),s.jsx(c,{children:"Issue Date"}),s.jsx(c,{children:"Status"}),s.jsx(c,{className:"text-right",children:"Actions"})]})}),e[42]=$):$=e[42];let v;e[43]!==l.data?(v=l.data.length===0?s.jsx(K,{children:s.jsxs(n,{colSpan:8,className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No transfer certificates found"}),s.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[s.jsx(a,{asChild:!0,variant:"link",children:s.jsx(T,{href:"/admin/tc-records/create",children:"Add single TC"})}),s.jsx("span",{className:"text-gray-400",children:"or"}),s.jsx(a,{asChild:!0,variant:"link",children:s.jsx(T,{href:"/admin/tc-records/bulk-upload",children:"Bulk upload"})})]})]})}):l.data.map(t=>s.jsxs(K,{children:[s.jsx(n,{className:"font-medium",children:t.tc_number}),s.jsx(n,{children:t.student_name}),s.jsx(n,{children:t.father_name}),s.jsx(n,{className:"font-mono text-sm",children:t.admission_number}),s.jsx(n,{children:t.class}),s.jsx(n,{children:oe(t.date_of_issue)}),s.jsx(n,{children:s.jsx("div",{className:"flex items-center gap-2",children:t.is_verified?s.jsxs(te,{variant:"outline",className:"bg-green-100 text-green-800",children:[s.jsx(re,{className:"h-3 w-3 mr-1"}),"Verified"]}):s.jsxs(te,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:[s.jsx(le,{className:"h-3 w-3 mr-1"}),"Pending"]})})}),s.jsx(n,{className:"text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end",children:[t.pdf_path&&s.jsx(a,{asChild:!0,size:"icon",variant:"ghost",title:"Download PDF",children:s.jsx("a",{href:`/admin/tc-records/${t.id}/download`,download:!0,children:s.jsx(Ae,{className:"h-4 w-4"})})}),s.jsx(a,{size:"icon",variant:"ghost",title:t.is_verified?"Mark as Unverified":"Mark as Verified",onClick:()=>ne(t.id),children:t.is_verified?s.jsx(le,{className:"h-4 w-4 text-yellow-600"}):s.jsx(re,{className:"h-4 w-4 text-green-600"})}),s.jsx(a,{asChild:!0,size:"icon",variant:"ghost",children:s.jsx(T,{href:`/admin/tc-records/${t.id}/edit`,children:s.jsx(ke,{className:"h-4 w-4"})})}),s.jsxs(be,{children:[s.jsx(ve,{asChild:!0,children:s.jsx(a,{size:"icon",variant:"ghost",className:"text-red-600 hover:text-red-700",children:s.jsx(Be,{className:"h-4 w-4"})})}),s.jsxs(Ce,{children:[s.jsxs(Ne,{children:[s.jsx(Se,{children:"Delete Transfer Certificate?"}),s.jsxs(ye,{children:["This will permanently delete the TC record for ",t.student_name," (TC #",t.tc_number,") including the PDF file."]})]}),s.jsxs(Te,{children:[s.jsx(we,{children:"Cancel"}),s.jsx(De,{onClick:()=>ce(t.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]},t.id)),e[43]=l.data,e[44]=v):v=e[44];let C;e[45]!==v?(C=s.jsxs(ge,{children:[$,s.jsx(_e,{children:v})]}),e[45]=v,e[46]=C):C=e[46];let N;e[47]!==l.last_page||e[48]!==l.links?(N=l.last_page>1&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-6",children:l.links.map(Ve)}),e[47]=l.last_page,e[48]=l.links,e[49]=N):N=e[49];let S;e[50]!==C||e[51]!==N?(S=s.jsxs(W,{children:[C,N]}),e[50]=C,e[51]=N,e[52]=S):S=e[52];let y;e[53]!==b||e[54]!==S?(y=s.jsxs(Q,{children:[b,S]}),e[53]=b,e[54]=S,e[55]=y):y=e[55];let E;return e[56]!==_||e[57]!==y?(E=s.jsxs(fe,{breadcrumbs:ie,children:[F,s.jsxs("div",{className:"space-y-6 p-6",children:[P,_,y]})]}),e[56]=_,e[57]=y,e[58]=E):E=e[58],E}function Ve(r,e){return s.jsx(a,{variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:()=>r.url&&D.get(r.url),dangerouslySetInnerHTML:{__html:r.label}},e)}function ze(r){return s.jsx(w,{value:r,children:r},r)}function Le(r){return new Date(r).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}function Me(r){D.delete(`/admin/tc-records/${r}`)}function Re(r){D.post(`/admin/tc-records/${r}/toggle-verified`,{},{preserveState:!0})}export{Is as default};
