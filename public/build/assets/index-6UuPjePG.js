import{c as _,r as O,u as ee,j as s,a as R,H as ae}from"./app-Cmq9oDGi.js";import{A as se}from"./app-layout-DoVO_vzw.js";import{B as G}from"./button-Cf4oe_XG.js";import{I as u}from"./input-CJJo5L_5.js";import{L as te}from"./label-DJa8iKFL.js";import{T as re}from"./textarea-CwjQz9xo.js";import{c as le,C as ie,a as oe,b as ne,d as ce}from"./card-X8yrq1E7.js";import{T as me,b as de,c as pe,a as ue}from"./tabs-CiC4krTr.js";import{T as he}from"./trash-2-DfEL4ZSA.js";import{L as U}from"./loader-circle-BR1vD74t.js";import{R as fe}from"./refresh-cw-Cj6XPS6l.js";import{S as xe}from"./save-CXYQgcZY.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./x-HfyhX8Ju.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./image-DO4yfKR-.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";const ye=[{title:"Dashboard",href:"/dashboard"},{title:"Settings",href:"/admin/settings"}],Q={general:"General",about:"About School",principal:"Principal",contact:"Contact Information",social:"Social Media",timings:"School Timings",cbse:"CBSE Details",academics:"Academics",homepage:"Homepage",seo:"SEO Settings",system:"System",branding:"Branding",content:"Content"},be={general:"Basic school information and settings.",about:"About the school, vision, and mission.",principal:"Principal details and message.",contact:"Contact details displayed on the website.",social:"Social media profile links.",timings:"School timings and schedules.",cbse:"CBSE affiliation and exam details.",academics:"Academic information and settings.",homepage:"Homepage content and configuration.",seo:"Search engine optimization settings.",system:"System settings and configuration.",branding:"Logos and brand assets.",content:"Important content like vision and mission."};function ia(c){const e=_.c(49),{settings:n}=c,[N,V]=O.useState(!1),[h,q]=O.useState(!1),[C,J]=O.useState(null);let w;e[0]!==n?(w=Object.keys(n),e[0]=n,e[1]=w):w=e[1];const m=w,[z,W]=O.useState(m[0]||"general");let d,S;e[2]!==n?(S={},d=new Set,Object.values(n).flat().forEach(a=>{a.type==="image"&&d.add(a.key),S[a.key]=a.value||""}),e[2]=n,e[3]=d,e[4]=S):(d=e[3],S=e[4]);const{data:l,setData:i,processing:T,errors:p}=ee(S);let A;e[5]!==l||e[6]!==d?(A=a=>{a.preventDefault(),V(!0);const r={};Object.entries(l).forEach(o=>{const[t,Z]=o;d.has(t)||(r[t]=Z)}),R.post("/admin/settings",r,{preserveScroll:!0,onFinish:()=>V(!1)})},e[5]=l,e[6]=d,e[7]=A):A=e[7];const M=A;let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{q(!0),R.post("/admin/settings/clear-cache",{},{preserveScroll:!0,onFinish:()=>q(!1)})},e[8]=D):D=e[8];const X=D;let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=(a,r)=>{if(r.target.files&&r.target.files[0]){const o=r.target.files[0];J(a);const t=new FormData;t.append("key",a),t.append("image",o),R.post("/admin/settings/upload-image",t,{preserveScroll:!0,onFinish:()=>J(null)})}},e[9]=E):E=e[9];const Y=E;let F;e[10]!==i?(F=a=>{confirm("Are you sure you want to delete this image?")&&R.post("/admin/settings/delete-image",{key:a},{preserveScroll:!0,onSuccess:()=>{i(a,"")}})},e[10]=i,e[11]=F):F=e[11];const P=F;let L;e[12]!==l||e[13]!==p||e[14]!==P||e[15]!==i||e[16]!==C?(L=a=>{const r=a.key,o=p[r];switch(a.type){case"text":return s.jsx(u,{id:a.key,value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:a.label,className:o?"border-destructive":""});case"textarea":return s.jsx(re,{id:a.key,value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:a.label,rows:4,className:o?"border-destructive":""});case"email":return s.jsx(u,{id:a.key,type:"email",value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:a.label,className:o?"border-destructive":""});case"url":return s.jsx(u,{id:a.key,type:"url",value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:"https://...",className:o?"border-destructive":""});case"number":return s.jsx(u,{id:a.key,type:"number",value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:a.label,className:o?"border-destructive":""});case"time":return s.jsx(u,{id:a.key,type:"time",value:l[a.key]||"00:00",onChange:t=>i(a.key,t.target.value),className:o?"border-destructive":"max-w-[150px]"});case"image":return s.jsxs("div",{className:"space-y-3",children:[l[a.key]&&s.jsxs("div",{className:"flex items-center gap-4 rounded-lg border p-3 bg-muted/50",children:[s.jsx("img",{src:`/storage/${l[a.key]}`,alt:a.label,className:"h-16 w-16 object-contain rounded border bg-white",onError:je}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:l[a.key]})}),s.jsx(G,{type:"button",variant:"destructive",size:"sm",onClick:()=>P(a.key),children:s.jsx(he,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u,{id:a.key,type:"file",accept:"image/*",onChange:t=>Y(a.key,t),className:o?"border-destructive":"",disabled:C===a.key}),C===a.key&&s.jsx(U,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})]});default:return s.jsx(u,{id:a.key,value:l[a.key]||"",onChange:t=>i(a.key,t.target.value),placeholder:a.label,className:o?"border-destructive":""})}},e[12]=l,e[13]=p,e[14]=P,e[15]=i,e[16]=C,e[17]=L):L=e[17];const $=L;let I;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(ae,{title:"Site Settings - APS Alwar Admin"}),e[18]=I):I=e[18];let B;e[19]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Site Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage website configuration and settings."})]}),e[19]=B):B=e[19];let f;e[20]!==h?(f=h?s.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(fe,{className:"mr-2 h-4 w-4"}),e[20]=h,e[21]=f):f=e[21];let x;e[22]!==h||e[23]!==f?(x=s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[B,s.jsxs(G,{variant:"outline",onClick:X,disabled:h,children:[f,"Clear Cache"]})]}),e[22]=h,e[23]=f,e[24]=x):x=e[24];let y;e[25]!==m?(y=s.jsx(me,{className:"flex flex-wrap h-auto gap-2",children:m.map(ve)}),e[25]=m,e[26]=y):y=e[26];let b;e[27]!==p||e[28]!==m||e[29]!==$||e[30]!==n?(b=m.map(a=>s.jsx(de,{value:a,className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(ie,{children:[s.jsx(oe,{children:Q[a]||a}),s.jsx(ne,{children:be[a]||`Manage ${a} settings.`})]}),s.jsx(ce,{className:"space-y-6",children:n[a]?.map(r=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:r.key,children:r.label}),$(r),r.description&&s.jsx("p",{className:"text-xs text-muted-foreground",children:r.description}),p[r.key]&&s.jsx("p",{className:"text-sm text-destructive",children:p[r.key]})]},r.id))})]})},a)),e[27]=p,e[28]=m,e[29]=$,e[30]=n,e[31]=b):b=e[31];let v;e[32]!==z||e[33]!==y||e[34]!==b?(v=s.jsxs(pe,{value:z,onValueChange:W,className:"space-y-6",children:[y,b]}),e[32]=z,e[33]=y,e[34]=b,e[35]=v):v=e[35];const K=T||N;let j;e[36]!==T||e[37]!==N?(j=T||N?s.jsxs(s.Fragment,{children:[s.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xe,{className:"mr-2 h-4 w-4"}),"Save All Settings"]}),e[36]=T,e[37]=N,e[38]=j):j=e[38];let g;e[39]!==K||e[40]!==j?(g=s.jsx("div",{className:"flex justify-end pt-6",children:s.jsx(G,{type:"submit",disabled:K,className:"bg-amber-600 hover:bg-amber-700",children:j})}),e[39]=K,e[40]=j,e[41]=g):g=e[41];let k;e[42]!==M||e[43]!==v||e[44]!==g?(k=s.jsxs("form",{onSubmit:M,children:[v,g]}),e[42]=M,e[43]=v,e[44]=g,e[45]=k):k=e[45];let H;return e[46]!==x||e[47]!==k?(H=s.jsxs(se,{breadcrumbs:ye,children:[I,s.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[x,k]})]}),e[46]=x,e[47]=k,e[48]=H):H=e[48],H}function ve(c){return s.jsx(ue,{value:c,className:"capitalize",children:Q[c]||c},c)}function je(c){c.target.style.display="none"}export{ia as default};
