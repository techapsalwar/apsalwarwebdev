import{c as Y,r as q,j as t,L as P,a as N,H as Z}from"./app-Cmq9oDGi.js";import{D as ee,a as te,b as se,c as re,d as G,e as R,A as ae}from"./app-layout-DoVO_vzw.js";import{B as L}from"./button-Cf4oe_XG.js";import{I as le}from"./input-CJJo5L_5.js";import{B as ie}from"./badge-B7t43j3u.js";import{b as V,e as n,a as ne,c as b,T as ce,d as oe}from"./table-DxHlWMmR.js";import{c as de,d as me,S as pe,a as z,b as xe}from"./select-MDq58P37.js";import{A as he,a as fe,b as ue,c as je,d as ge,e as ve,f as be,g as Ne,h as _e}from"./alert-dialog-D5vPuSRT.js";import{S as Se}from"./switch-C474g68b.js";import{U as J}from"./x-HfyhX8Ju.js";import{E as De}from"./ellipsis--ffdwBfy.js";import{E as we}from"./eye-B9qCQXIl.js";import{S as Ae}from"./square-pen-BIQygcGa.js";import{T as ye}from"./trash-2-DfEL4ZSA.js";import{P as Ce}from"./plus-CX2v85UT.js";import{B as Te}from"./building-BGot4YKt.js";import{S as ke}from"./search-CM4xpWys.js";import{F as Me}from"./filter-BWU97YmN.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./image-DO4yfKR-.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";import"./index-CJgzQKWL.js";import"./chevron-up-08YVdQiA.js";import"./check-z4pC7DcM.js";const Ee=[{title:"Dashboard",href:"/dashboard"},{title:"Departments",href:"/admin/departments"}];function Mt(a){const e=Y.c(53),{items:s,filters:U}=a,[l,K]=q.useState(U.search||""),[i,O]=q.useState(U.active||"all");let c;if(e[0]!==i||e[1]!==l){c=X=>{X.preventDefault(),r()};const r=()=>{N.get("/admin/departments",{search:l||void 0,active:i!=="all"?i:void 0},{preserveState:!0,preserveScroll:!0})};e[0]=i,e[1]=l,e[2]=c}else c=e[2];let _;e[3]!==l?(_=r=>{O(r),N.get("/admin/departments",{search:l,active:r!=="all"?r:void 0},{preserveState:!0,preserveScroll:!0})},e[3]=l,e[4]=_):_=e[4];const $=_,Q=Le,W=He;let S;e[5]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(Z,{title:"Departments - APS Alwar Admin"}),e[5]=S):S=e[5];let D;e[6]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Departments"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage academic and administrative departments."})]}),e[6]=D):D=e[6];let w;e[7]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[D,t.jsx(L,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:t.jsxs(P,{href:"/admin/departments/create",children:[t.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Add Department"]})})]}),e[7]=w):w=e[7];let A,y;e[8]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("div",{className:"rounded-full bg-blue-100 p-2 dark:bg-blue-900",children:t.jsx(Te,{className:"h-5 w-5 text-blue-600 dark:text-blue-300"})}),y=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Departments"}),e[8]=A,e[9]=y):(A=e[8],y=e[9]);let o;e[10]!==s.total?(o=t.jsx("div",{className:"rounded-lg border bg-card p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[A,t.jsxs("div",{children:[y,t.jsx("p",{className:"text-2xl font-bold",children:s.total})]})]})}),e[10]=s.total,e[11]=o):o=e[11];let C,T;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"rounded-full bg-green-100 p-2 dark:bg-green-900",children:t.jsx(J,{className:"h-5 w-5 text-green-600 dark:text-green-300"})}),T=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Staff"}),e[12]=C,e[13]=T):(C=e[12],T=e[13]);let d;e[14]!==s.data?(d=s.data.reduce(Fe,0),e[14]=s.data,e[15]=d):d=e[15];let m;e[16]!==d?(m=t.jsx("div",{className:"rounded-lg border bg-card p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[C,t.jsxs("div",{children:[T,t.jsx("p",{className:"text-2xl font-bold",children:d})]})]})}),e[16]=d,e[17]=m):m=e[17];let p;e[18]!==m||e[19]!==o?(p=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o,m]}),e[18]=m,e[19]=o,e[20]=p):p=e[20];let k;e[21]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ke,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[21]=k):k=e[21];let M;e[22]===Symbol.for("react.memo_cache_sentinel")?(M=r=>K(r.target.value),e[22]=M):M=e[22];let x;e[23]!==l?(x=t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[k,t.jsx(le,{placeholder:"Search departments...",value:l,onChange:M,className:"pl-9"})]}),e[23]=l,e[24]=x):x=e[24];let E;e[25]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(L,{type:"submit",variant:"secondary",children:"Search"}),e[25]=E):E=e[25];let h;e[26]!==c||e[27]!==x?(h=t.jsxs("form",{onSubmit:c,className:"flex flex-1 gap-2",children:[x,E]}),e[26]=c,e[27]=x,e[28]=h):h=e[28];let I;e[29]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs(de,{className:"w-[150px]",children:[t.jsx(Me,{className:"mr-2 h-4 w-4"}),t.jsx(me,{placeholder:"Status"})]}),e[29]=I):I=e[29];let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs(pe,{children:[t.jsx(z,{value:"all",children:"All Status"}),t.jsx(z,{value:"1",children:"Active"}),t.jsx(z,{value:"0",children:"Inactive"})]}),e[30]=B):B=e[30];let f;e[31]!==i||e[32]!==$?(f=t.jsxs(xe,{value:i,onValueChange:$,children:[I,B]}),e[31]=i,e[32]=$,e[33]=f):f=e[33];let u;e[34]!==h||e[35]!==f?(u=t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[h,f]}),e[34]=h,e[35]=f,e[36]=u):u=e[36];let F;e[37]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(ne,{children:t.jsxs(V,{children:[t.jsx(b,{className:"w-12",children:"#"}),t.jsx(b,{className:"w-[35%]",children:"Department"}),t.jsx(b,{children:"Staff Count"}),t.jsx(b,{children:"Status"}),t.jsx(b,{children:"Active"}),t.jsx(b,{className:"text-right",children:"Actions"})]})}),e[37]=F):F=e[37];let j;e[38]!==s.data?(j=s.data.length===0?t.jsx(V,{children:t.jsx(n,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No departments found."})}):s.data.map(r=>t.jsxs(V,{children:[t.jsx(n,{className:"font-medium text-muted-foreground",children:r.order}),t.jsx(n,{children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r.name}),r.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:r.description})]})}),t.jsx(n,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:r.staff_count})]})}),t.jsx(n,{children:t.jsx(ie,{variant:r.is_active?"default":"secondary",children:r.is_active?"Active":"Inactive"})}),t.jsx(n,{children:t.jsx(Se,{checked:r.is_active,onCheckedChange:()=>W(r.id)})}),t.jsx(n,{className:"text-right",children:t.jsxs(ee,{children:[t.jsx(te,{asChild:!0,children:t.jsxs(L,{variant:"ghost",size:"icon",children:[t.jsx(De,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Actions"})]})}),t.jsxs(se,{align:"end",children:[t.jsx(re,{children:"Actions"}),t.jsx(G,{}),t.jsx(R,{asChild:!0,children:t.jsxs(P,{href:`/admin/departments/${r.id}`,children:[t.jsx(we,{className:"mr-2 h-4 w-4"}),"View"]})}),t.jsx(R,{asChild:!0,children:t.jsxs(P,{href:`/admin/departments/${r.id}/edit`,children:[t.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t.jsx(G,{}),t.jsxs(he,{children:[t.jsx(fe,{asChild:!0,children:t.jsxs(R,{className:"text-destructive focus:text-destructive",onSelect:Be,disabled:r.staff_count>0,children:[t.jsx(ye,{className:"mr-2 h-4 w-4"}),"Delete"]})}),t.jsxs(ue,{children:[t.jsxs(je,{children:[t.jsx(ge,{children:"Delete Department"}),t.jsxs(ve,{children:['Are you sure you want to delete "',r.name,'"? This action cannot be undone.']})]}),t.jsxs(be,{children:[t.jsx(Ne,{children:"Cancel"}),t.jsx(_e,{onClick:()=>Q(r.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})})]},r.id)),e[38]=s.data,e[39]=j):j=e[39];let g;e[40]!==j?(g=t.jsx("div",{className:"rounded-lg border bg-card",children:t.jsxs(ce,{children:[F,t.jsx(oe,{children:j})]})}),e[40]=j,e[41]=g):g=e[41];let v;e[42]!==s.current_page||e[43]!==s.last_page||e[44]!==s.links||e[45]!==s.per_page||e[46]!==s.total?(v=s.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(s.current_page-1)*s.per_page+1," to"," ",Math.min(s.current_page*s.per_page,s.total)," of ",s.total," results"]}),t.jsx("div",{className:"flex gap-2",children:s.links.map(Ie)})]}),e[42]=s.current_page,e[43]=s.last_page,e[44]=s.links,e[45]=s.per_page,e[46]=s.total,e[47]=v):v=e[47];let H;return e[48]!==p||e[49]!==u||e[50]!==g||e[51]!==v?(H=t.jsxs(ae,{breadcrumbs:Ee,children:[S,t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[w,p,u,g,v]})]}),e[48]=p,e[49]=u,e[50]=g,e[51]=v,e[52]=H):H=e[52],H}function Ie(a,e){return t.jsx(L,{variant:a.active?"default":"outline",size:"sm",disabled:!a.url,onClick:()=>a.url&&N.get(a.url),dangerouslySetInnerHTML:{__html:a.label}},e)}function Be(a){return a.preventDefault()}function Fe(a,e){return a+e.staff_count}function He(a){N.post(`/admin/departments/${a}/toggle-active`,{},{preserveScroll:!0})}function Le(a){N.delete(`/admin/departments/${a}`,{preserveScroll:!0})}export{Mt as default};
