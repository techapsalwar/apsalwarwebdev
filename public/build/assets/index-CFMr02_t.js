import{c as ce,r as G,j as r,L as J,a as S,H as de}from"./app-Cmq9oDGi.js";import{D as me,a as xe,b as he,c as pe,d as X,e as K,A as ge}from"./app-layout-DoVO_vzw.js";import{c as ue,B as w}from"./button-Cf4oe_XG.js";import{I as fe}from"./input-CJJo5L_5.js";import{B as Q}from"./badge-B7t43j3u.js";import{b as U,e as i,a as be,c as _,T as je,d as ye}from"./table-DxHlWMmR.js";import{S as Y,c as Z,d as ee,a as O,b as re}from"./select-MDq58P37.js";import{A as ve,a as Ne,b as _e,c as Se,d as we,e as Ae,f as De,g as ke,h as Te}from"./alert-dialog-D5vPuSRT.js";import{T as Ce}from"./triangle-alert-CfucdgGv.js";import{C as Me}from"./circle-alert-Ch7775ge.js";import{B as Ee}from"./bell-BM-5sz5_.js";import{P as Pe}from"./paperclip-CmVXVl_V.js";import{E as Be}from"./external-link-DRdWDLeD.js";import{E as Ie}from"./ellipsis--ffdwBfy.js";import{E as Le}from"./eye-B9qCQXIl.js";import{S as $e}from"./square-pen-BIQygcGa.js";import{T as Fe}from"./trash-2-DfEL4ZSA.js";import{P as He}from"./plus-CX2v85UT.js";import{S as Oe}from"./search-CM4xpWys.js";import{F as Ve}from"./filter-BWU97YmN.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./x-HfyhX8Ju.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./image-DO4yfKR-.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";import"./index-CJgzQKWL.js";import"./chevron-up-08YVdQiA.js";import"./check-z4pC7DcM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Re=ue("BellOff",ze),qe=[{title:"Dashboard",href:"/dashboard"},{title:"Announcements",href:"/admin/announcements"}],te={critical:{bg:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100 border-red-300",border:"border-l-4 border-l-red-500",icon:!0},high:{bg:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100 border-orange-300",border:"border-l-4 border-l-orange-500",icon:!0},medium:{bg:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100 border-yellow-300",border:"border-l-4 border-l-yellow-500",icon:!1},low:{bg:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 border-green-300",border:"border-l-4 border-l-green-500",icon:!1}},se={urgent:"bg-red-100 text-red-800 border-red-200",important:"bg-orange-100 text-orange-800 border-orange-200",event:"bg-blue-100 text-blue-800 border-blue-200",holiday:"bg-green-100 text-green-800 border-green-200",admission:"bg-purple-100 text-purple-800 border-purple-200",exam:"bg-amber-100 text-amber-800 border-amber-200",result:"bg-teal-100 text-teal-800 border-teal-200",academic:"bg-indigo-100 text-indigo-800 border-indigo-200",general:"bg-gray-100 text-gray-800 border-gray-200",other:"bg-gray-100 text-gray-800 border-gray-200"};function Qr(a){const e=ce.c(60),{items:s,filters:V,types:c,priorities:d}=a,[l,ae]=G.useState(V.search||""),[n,le]=G.useState(V.priority||"all"),[o,ne]=G.useState(V.type||"all");let m;if(e[0]!==n||e[1]!==l||e[2]!==o){m=q=>{q.preventDefault(),t({search:l})};const t=q=>{S.get("/admin/announcements",{search:l||void 0,priority:n!=="all"?n:void 0,type:o!=="all"?o:void 0,...q},{preserveState:!0,preserveScroll:!0})};e[0]=n,e[1]=l,e[2]=o,e[3]=m}else m=e[3];let A;e[4]!==l||e[5]!==o?(A=t=>{le(t),S.get("/admin/announcements",{search:l||void 0,priority:t!=="all"?t:void 0,type:o!=="all"?o:void 0},{preserveState:!0,preserveScroll:!0})},e[4]=l,e[5]=o,e[6]=A):A=e[6];const z=A;let D;e[7]!==n||e[8]!==l?(D=t=>{ne(t),S.get("/admin/announcements",{search:l||void 0,priority:n!=="all"?n:void 0,type:t!=="all"?t:void 0},{preserveState:!0,preserveScroll:!0})},e[7]=n,e[8]=l,e[9]=D):D=e[9];const R=D,oe=Xe,ie=We,W=Ue;let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(de,{title:"Announcements Management - APS Alwar Admin"}),e[10]=k):k=e[10];let T;e[11]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Announcements Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage school announcements and notices."})]}),e[11]=T):T=e[11];let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[T,r.jsx(w,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:r.jsxs(J,{href:"/admin/announcements/create",children:[r.jsx(He,{className:"mr-2 h-4 w-4"}),"Add Announcement"]})})]}),e[12]=C):C=e[12];let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(Oe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[13]=M):M=e[13];let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=t=>ae(t.target.value),e[14]=E):E=e[14];let x;e[15]!==l?(x=r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[M,r.jsx(fe,{placeholder:"Search announcements...",value:l,onChange:E,className:"pl-9"})]}),e[15]=l,e[16]=x):x=e[16];let P;e[17]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(w,{type:"submit",variant:"secondary",children:"Search"}),e[17]=P):P=e[17];let h;e[18]!==m||e[19]!==x?(h=r.jsxs("form",{onSubmit:m,className:"flex flex-1 gap-2",children:[x,P]}),e[18]=m,e[19]=x,e[20]=h):h=e[20];let B;e[21]===Symbol.for("react.memo_cache_sentinel")?(B=r.jsx(Z,{className:"w-[140px]",children:r.jsx(ee,{placeholder:"Type"})}),e[21]=B):B=e[21];let I;e[22]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(O,{value:"all",children:"All Types"}),e[22]=I):I=e[22];let p;e[23]!==c?(p=r.jsxs(Y,{children:[I,Object.entries(c).map(Qe)]}),e[23]=c,e[24]=p):p=e[24];let g;e[25]!==R||e[26]!==p||e[27]!==o?(g=r.jsxs(re,{value:o,onValueChange:R,children:[B,p]}),e[25]=R,e[26]=p,e[27]=o,e[28]=g):g=e[28];let L;e[29]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsxs(Z,{className:"w-[140px]",children:[r.jsx(Ve,{className:"mr-2 h-4 w-4"}),r.jsx(ee,{placeholder:"Priority"})]}),e[29]=L):L=e[29];let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(O,{value:"all",children:"All Priority"}),e[30]=$):$=e[30];let u;e[31]!==d?(u=r.jsxs(Y,{children:[$,Object.entries(d).map(Ke)]}),e[31]=d,e[32]=u):u=e[32];let f;e[33]!==z||e[34]!==n||e[35]!==u?(f=r.jsxs(re,{value:n,onValueChange:z,children:[L,u]}),e[33]=z,e[34]=n,e[35]=u,e[36]=f):f=e[36];let b;e[37]!==g||e[38]!==f?(b=r.jsxs("div",{className:"flex gap-2",children:[g,f]}),e[37]=g,e[38]=f,e[39]=b):b=e[39];let j;e[40]!==h||e[41]!==b?(j=r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[h,b]}),e[40]=h,e[41]=b,e[42]=j):j=e[42];let F;e[43]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx(be,{children:r.jsxs(U,{children:[r.jsx(_,{className:"w-[35%]",children:"Announcement"}),r.jsx(_,{children:"Type"}),r.jsx(_,{children:"Priority"}),r.jsx(_,{children:"Status"}),r.jsx(_,{children:"Attachments"}),r.jsx(_,{className:"text-right",children:"Actions"})]})}),e[43]=F):F=e[43];let y;e[44]!==s.data||e[45]!==d||e[46]!==c?(y=s.data.length===0?r.jsx(U,{children:r.jsx(i,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No announcements found."})}):s.data.map(t=>r.jsxs(U,{className:te[t.priority]?.border,children:[r.jsx(i,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[(t.priority==="critical"||t.priority==="high")&&r.jsx(Ce,{className:`h-4 w-4 ${t.priority==="critical"?"text-red-500":"text-orange-500"}`}),r.jsx("p",{className:"font-medium",children:t.title})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:t.content}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[W(t.start_date),t.end_date&&` - ${W(t.end_date)}`]})]})}),r.jsx(i,{children:r.jsx(Q,{className:se[t.type]||se.general,children:c[t.type]||t.type})}),r.jsx(i,{children:r.jsxs(Q,{className:te[t.priority]?.bg,children:[t.priority==="critical"&&r.jsx(Me,{className:"mr-1 h-3 w-3"}),d[t.priority]||t.priority]})}),r.jsx(i,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(w,{variant:"ghost",size:"sm",onClick:()=>ie(t.id),className:t.is_active?"text-green-600 hover:text-green-700":"text-gray-400 hover:text-gray-500",children:t.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Ee,{className:"mr-1 h-4 w-4"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(Re,{className:"mr-1 h-4 w-4"}),"Inactive"]})}),t.show_in_ticker&&r.jsx(Q,{variant:"outline",className:"text-xs text-amber-600 border-amber-600",children:"Ticker"})]})}),r.jsx(i,{children:r.jsxs("div",{className:"flex gap-2",children:[t.attachment&&r.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",title:"File attachment",children:r.jsx(Pe,{className:"h-4 w-4"})}),t.link&&r.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800",title:"External link",children:r.jsx(Be,{className:"h-4 w-4"})}),!t.attachment&&!t.link&&r.jsx("span",{className:"text-muted-foreground text-sm",children:"None"})]})}),r.jsx(i,{className:"text-right",children:r.jsxs(me,{children:[r.jsx(xe,{asChild:!0,children:r.jsxs(w,{variant:"ghost",size:"icon",children:[r.jsx(Ie,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Actions"})]})}),r.jsxs(he,{align:"end",children:[r.jsx(pe,{children:"Actions"}),r.jsx(X,{}),r.jsx(K,{asChild:!0,children:r.jsxs(J,{href:`/admin/announcements/${t.id}`,children:[r.jsx(Le,{className:"mr-2 h-4 w-4"}),"View"]})}),r.jsx(K,{asChild:!0,children:r.jsxs(J,{href:`/admin/announcements/${t.id}/edit`,children:[r.jsx($e,{className:"mr-2 h-4 w-4"}),"Edit"]})}),r.jsx(X,{}),r.jsxs(ve,{children:[r.jsx(Ne,{asChild:!0,children:r.jsxs(K,{className:"text-destructive focus:text-destructive",onSelect:Je,children:[r.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Delete"]})}),r.jsxs(_e,{children:[r.jsxs(Se,{children:[r.jsx(we,{children:"Delete Announcement"}),r.jsxs(Ae,{children:['Are you sure you want to delete "',t.title,'"? This action cannot be undone.']})]}),r.jsxs(De,{children:[r.jsx(ke,{children:"Cancel"}),r.jsx(Te,{onClick:()=>oe(t.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})})]},t.id)),e[44]=s.data,e[45]=d,e[46]=c,e[47]=y):y=e[47];let v;e[48]!==y?(v=r.jsx("div",{className:"rounded-lg border bg-card",children:r.jsxs(je,{children:[F,r.jsx(ye,{children:y})]})}),e[48]=y,e[49]=v):v=e[49];let N;e[50]!==s.current_page||e[51]!==s.last_page||e[52]!==s.links||e[53]!==s.per_page||e[54]!==s.total?(N=s.last_page>1&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(s.current_page-1)*s.per_page+1," to"," ",Math.min(s.current_page*s.per_page,s.total)," of ",s.total," results"]}),r.jsx("div",{className:"flex gap-2",children:s.links.map(Ge)})]}),e[50]=s.current_page,e[51]=s.last_page,e[52]=s.links,e[53]=s.per_page,e[54]=s.total,e[55]=N):N=e[55];let H;return e[56]!==j||e[57]!==v||e[58]!==N?(H=r.jsxs(ge,{breadcrumbs:qe,children:[k,r.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[C,j,v,N]})]}),e[56]=j,e[57]=v,e[58]=N,e[59]=H):H=e[59],H}function Ge(a,e){return r.jsx(w,{variant:a.active?"default":"outline",size:"sm",disabled:!a.url,onClick:()=>a.url&&S.get(a.url),dangerouslySetInnerHTML:{__html:a.label}},e)}function Je(a){return a.preventDefault()}function Ke(a){const[e,s]=a;return r.jsx(O,{value:e,children:s},e)}function Qe(a){const[e,s]=a;return r.jsx(O,{value:e,children:s},e)}function Ue(a){return a?new Date(a).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"Not set"}function We(a){S.post(`/admin/announcements/${a}/toggle-active`,{},{preserveScroll:!0})}function Xe(a){S.delete(`/admin/announcements/${a}`,{preserveScroll:!0})}export{Qr as default};
