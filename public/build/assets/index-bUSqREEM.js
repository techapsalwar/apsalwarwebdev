import{c as je,r as ae,j as t,L as se,a as A,H as be}from"./app-Cmq9oDGi.js";import{A as ve}from"./app-layout-DoVO_vzw.js";import{B as c}from"./button-Cf4oe_XG.js";import{I as Ne}from"./input-CJJo5L_5.js";import{B as _}from"./badge-B7t43j3u.js";import{c as re,d as le,C as ye,a as Se,b as ke,e as Ce}from"./card-X8yrq1E7.js";import{c as oe,d as ne,a as T,S as me,b as de}from"./select-MDq58P37.js";import{d as we,c as De,e as Ae,g as _e,f as Fe,h as Te,b as Ie,A as Ee}from"./alert-dialog-D5vPuSRT.js";import{B as ie}from"./building-BGot4YKt.js";import{P as he}from"./plus-CX2v85UT.js";import{D as Pe,T as Be,P as He,V as Le}from"./video-B2GH74K6.js";import{L as $e}from"./library-mCyMuHRq.js";import{T as ze}from"./x-HfyhX8Ju.js";import{S as Oe}from"./school-D_aABbcu.js";import{F as Ve}from"./flask-conical-BboPljha.js";import{I as Me}from"./image-DO4yfKR-.js";import{S as Re}from"./square-pen-BIQygcGa.js";import{E as qe}from"./eye-off-vGWujgza.js";import{E as Ge}from"./eye-B9qCQXIl.js";import{T as Je}from"./trash-2-DfEL4ZSA.js";import{S as Ke}from"./search-CM4xpWys.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./index-CJgzQKWL.js";import"./chevron-up-08YVdQiA.js";import"./check-z4pC7DcM.js";const Qe=[{title:"Dashboard",href:"/dashboard"},{title:"Facilities",href:"/admin/facilities"}],Ue={lab:Ve,classroom:Oe,sports:ze,library:$e,auditorium:He,playground:Be,special_room:Pe,other:ie};function Qt(l){const e=je.c(76),{facilities:r,filters:s,categories:o}=l,[n,xe]=ae.useState(s.search),[U,W]=ae.useState(!1),[F,ce]=ae.useState(null);let I;e[0]!==s.active||e[1]!==s.category||e[2]!==n?(I=a=>{a.preventDefault(),A.get("/admin/facilities",{search:n,category:s.category,active:s.active},{preserveState:!0,preserveScroll:!0})},e[0]=s.active,e[1]=s.category,e[2]=n,e[3]=I):I=e[3];const X=I;let E;e[4]!==s.active||e[5]!==s.category||e[6]!==s.search?(E=(a,i)=>{A.get("/admin/facilities",{search:s.search,category:s.category,active:s.active,[a]:i==="all"?"":i},{preserveState:!0,preserveScroll:!0})},e[4]=s.active,e[5]=s.category,e[6]=s.search,e[7]=E):E=e[7];const m=E;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=a=>{A.delete(`/admin/facilities/${a}`,{onSuccess:()=>{W(!1),ce(null)}})},e[8]=P):P=e[8];const ge=P;let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=a=>{ce(a),W(!0)},e[9]=B):B=e[9];const pe=B,fe=Ze;let H;e[10]!==o?(H=a=>o.find(i=>i.value===a)?.label||a,e[10]=o,e[11]=H):H=e[11];const Y=H,ue=Ye;let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(be,{title:"Facilities - APS Alwar Admin"}),e[12]=L):L=e[12];let $;e[13]===Symbol.for("react.memo_cache_sentinel")?($=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Facilities"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage school infrastructure and facilities."})]}),e[13]=$):$=e[13];let z;e[14]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[$,t.jsx(c,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:t.jsxs(se,{href:"/admin/facilities/create",children:[t.jsx(he,{className:"mr-2 h-4 w-4"}),"Add Facility"]})})]}),e[14]=z):z=e[14];let O;e[15]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(Ke,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[15]=O):O=e[15];let V;e[16]===Symbol.for("react.memo_cache_sentinel")?(V=a=>xe(a.target.value),e[16]=V):V=e[16];let d;e[17]!==n?(d=t.jsxs("div",{className:"relative",children:[O,t.jsx(Ne,{placeholder:"Search facilities...",value:n,onChange:V,className:"pl-9"})]}),e[17]=n,e[18]=d):d=e[18];let h;e[19]!==X||e[20]!==d?(h=t.jsx("form",{onSubmit:X,className:"flex-1",children:d}),e[19]=X,e[20]=d,e[21]=h):h=e[21];const Z=s.category||"all";let x;e[22]!==m?(x=a=>m("category",a),e[22]=m,e[23]=x):x=e[23];let M;e[24]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(oe,{className:"w-[160px]",children:t.jsx(ne,{placeholder:"Category"})}),e[24]=M):M=e[24];let R;e[25]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(T,{value:"all",children:"All Categories"}),e[25]=R):R=e[25];let g;e[26]!==o?(g=o.map(Xe),e[26]=o,e[27]=g):g=e[27];let p;e[28]!==g?(p=t.jsxs(me,{children:[R,g]}),e[28]=g,e[29]=p):p=e[29];let f;e[30]!==Z||e[31]!==x||e[32]!==p?(f=t.jsxs(de,{value:Z,onValueChange:x,children:[M,p]}),e[30]=Z,e[31]=x,e[32]=p,e[33]=f):f=e[33];const ee=s.active||"all";let u;e[34]!==m?(u=a=>m("active",a),e[34]=m,e[35]=u):u=e[35];let q;e[36]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(oe,{className:"w-[120px]",children:t.jsx(ne,{placeholder:"Status"})}),e[36]=q):q=e[36];let G;e[37]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs(me,{children:[t.jsx(T,{value:"all",children:"All Status"}),t.jsx(T,{value:"1",children:"Active"}),t.jsx(T,{value:"0",children:"Inactive"})]}),e[37]=G):G=e[37];let j;e[38]!==ee||e[39]!==u?(j=t.jsxs(de,{value:ee,onValueChange:u,children:[q,G]}),e[38]=ee,e[39]=u,e[40]=j):j=e[40];let b;e[41]!==f||e[42]!==j?(b=t.jsxs("div",{className:"flex gap-2",children:[f,j]}),e[41]=f,e[42]=j,e[43]=b):b=e[43];let v;e[44]!==h||e[45]!==b?(v=t.jsx(re,{children:t.jsx(le,{className:"pt-6",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[h,b]})})}),e[44]=h,e[45]=b,e[46]=v):v=e[46];let N;e[47]!==r.data||e[48]!==s.active||e[49]!==s.category||e[50]!==s.search||e[51]!==Y?(N=r.data.length===0?t.jsx(re,{children:t.jsxs(le,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(ie,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No facilities found"}),t.jsx("p",{className:"text-muted-foreground text-center mb-4",children:s.search||s.category||s.active?"Try adjusting your filters.":"Get started by adding your first facility."}),!s.search&&!s.category&&!s.active&&t.jsx(c,{asChild:!0,children:t.jsxs(se,{href:"/admin/facilities/create",children:[t.jsx(he,{className:"mr-2 h-4 w-4"}),"Add Facility"]})})]})}):t.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.data.map(a=>{const i=Ue[a.category]||ie;return t.jsxs(re,{className:`overflow-hidden ${a.is_active?"":"opacity-60"}`,children:[t.jsxs("div",{className:"relative aspect-video bg-muted",children:[a.image?t.jsx("img",{src:`/storage/${a.image}`,alt:a.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20",children:t.jsx(i,{className:"h-12 w-12 text-amber-400"})}),t.jsxs("div",{className:"absolute top-2 left-2 flex gap-2",children:[a.has_virtual_tour&&t.jsxs(_,{className:"bg-blue-600",children:[t.jsx(Le,{className:"h-3 w-3 mr-1"}),"360Â°"]}),a.gallery&&a.gallery.length>0&&t.jsxs(_,{variant:"secondary",children:[t.jsx(Me,{className:"h-3 w-3 mr-1"}),a.gallery.length]})]}),t.jsx("div",{className:"absolute top-2 right-2",children:!a.is_active&&t.jsx(_,{variant:"secondary",children:"Hidden"})})]}),t.jsx(ye,{className:"pb-2",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx(Se,{className:"line-clamp-1",children:a.name}),t.jsxs(_,{className:ue(a.category),children:[t.jsx(i,{className:"h-3 w-3 mr-1"}),Y(a.category)]})]})}),t.jsxs(le,{children:[a.description&&t.jsx(ke,{className:"line-clamp-2",children:a.description}),a.features&&a.features.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[a.features.slice(0,3).map(We),a.features.length>3&&t.jsxs(_,{variant:"outline",className:"text-xs",children:["+",a.features.length-3]})]})]}),t.jsxs(Ce,{className:"border-t pt-4 flex gap-2",children:[t.jsx(c,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:t.jsxs(se,{href:`/admin/facilities/${a.id}/edit`,children:[t.jsx(Re,{className:"mr-1 h-4 w-4"}),"Edit"]})}),t.jsx(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>fe(a.id),children:a.is_active?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"mr-1 h-4 w-4"}),"Hide"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ge,{className:"mr-1 h-4 w-4"}),"Show"]})}),t.jsxs(c,{variant:"outline",size:"sm",className:"flex-1 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>pe(a),children:[t.jsx(Je,{className:"mr-1 h-4 w-4"}),"Delete"]})]})]},a.id)})}),e[47]=r.data,e[48]=s.active,e[49]=s.category,e[50]=s.search,e[51]=Y,e[52]=N):N=e[52];let y;e[53]!==r.data.length||e[54]!==r.links||e[55]!==r.meta?(y=r.data.length>0&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(r.meta.current_page-1)*r.meta.per_page+1," to"," ",Math.min(r.meta.current_page*r.meta.per_page,r.meta.total)," of"," ",r.meta.total," facilities"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(c,{variant:"outline",size:"sm",disabled:!r.links.prev,onClick:()=>A.get(r.links.prev),children:"Previous"}),t.jsx(c,{variant:"outline",size:"sm",disabled:!r.links.next,onClick:()=>A.get(r.links.next),children:"Next"})]})]}),e[53]=r.data.length,e[54]=r.links,e[55]=r.meta,e[56]=y):y=e[56];let S;e[57]!==v||e[58]!==N||e[59]!==y?(S=t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[z,v,N,y]}),e[57]=v,e[58]=N,e[59]=y,e[60]=S):S=e[60];let J;e[61]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(we,{children:"Delete Facility?"}),e[61]=J):J=e[61];const te=F?.name;let k;e[62]!==te?(k=t.jsxs(De,{children:[J,t.jsxs(Ae,{children:['This will permanently delete "',te,'". This action cannot be undone.']})]}),e[62]=te,e[63]=k):k=e[63];let K;e[64]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(_e,{children:"Cancel"}),e[64]=K):K=e[64];let C;e[65]!==F?(C=t.jsxs(Fe,{children:[K,t.jsx(Te,{onClick:()=>F&&ge(F.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]}),e[65]=F,e[66]=C):C=e[66];let w;e[67]!==k||e[68]!==C?(w=t.jsxs(Ie,{children:[k,C]}),e[67]=k,e[68]=C,e[69]=w):w=e[69];let D;e[70]!==U||e[71]!==w?(D=t.jsx(Ee,{open:U,onOpenChange:W,children:w}),e[70]=U,e[71]=w,e[72]=D):D=e[72];let Q;return e[73]!==S||e[74]!==D?(Q=t.jsxs(ve,{breadcrumbs:Qe,children:[L,S,D]}),e[73]=S,e[74]=D,e[75]=Q):Q=e[75],Q}function We(l,e){return t.jsx(_,{variant:"outline",className:"text-xs",children:l},e)}function Xe(l){return t.jsx(T,{value:l.value,children:l.label},l.value)}function Ye(l){const e={lab:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",classroom:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",sports:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",library:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",auditorium:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",playground:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200",special_room:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",other:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return e[l]||e.other}function Ze(l){A.post(`/admin/facilities/${l}/toggle-active`)}export{Qt as default};
