import{c as Te,u as Ve,j as s,H as $e,L as He}from"./app-lLew-mq0.js";import{A as Oe}from"./app-layout-KzQEyLiQ.js";import{B as $}from"./button-DTZ67Z4b.js";import{I as O}from"./input-C9VfnsW_.js";import{L as m}from"./label-BTNSqOD-.js";import{C as qe}from"./checkbox-DrTTb7Zo.js";import{S as Je}from"./switch-CGXN52OW.js";import{c as Le,C as De,a as Ie,b as ze,d as Re}from"./card-DWcOyhKP.js";import{d as Ke,c as Qe,S as We,b as Xe,a as Ye}from"./select-QGsFE1Nt.js";import{S as Be}from"./separator-CX_6Iv6y.js";import{S as Ze}from"./x-CV1yhBJZ.js";import{A as es}from"./arrow-left-Bw3DDjFc.js";import{U as ss}from"./user-plus-B5g38JVN.js";import{S as ts}from"./save-D77rFDZ-.js";/* empty css            */import"./index-BiNrCjIr.js";import"./index-CMRMG5Mo.js";import"./index-B9jue-Th.js";import"./index-CZQ422QV.js";import"./Combination-BEW_kzWa.js";import"./index-BzAksq8r.js";import"./index-BOY9t191.js";import"./index-CxACbU5U.js";import"./index-C7YjzNVQ.js";import"./index-DI1PiJH0.js";import"./index-CbiHmYlh.js";import"./index-DTTikWjI.js";import"./avatar-DYrdvPax.js";import"./index-BTFUtR64.js";import"./index-DHA2i0B2.js";import"./image-CHvhAmHJ.js";import"./link-D-JBfegL.js";import"./quote-DLUiA_F1.js";import"./newspaper-D3mdqZcT.js";import"./megaphone-BG2hP5oS.js";import"./indian-rupee-Bj1qYK0P.js";import"./file-check-UDYRRxCK.js";import"./folder-l-97kfum.js";import"./handshake-V1wEucA7.js";import"./school-BjNRgEiN.js";import"./index-t_bT_gQV.js";import"./check-DGLhpy4l.js";import"./chevron-up-Bv-H0xE7.js";function Ws(a){const e=Te.c(130),{roles:ge,permissions:_e,groupedModules:d}=a;let q;e[0]===Symbol.for("react.memo_cache_sentinel")?(q=[],e[0]=q):q=e[0];let J;e[1]===Symbol.for("react.memo_cache_sentinel")?(J={name:"",email:"",password:"",password_confirmation:"",phone:"",role:"viewer",permissions:q,is_active:!0},e[1]=J):J=e[1];const{data:t,setData:l,post:ye,processing:K,errors:r}=Ve(J);let Q;e[2]!==ye?(Q=i=>{i.preventDefault(),ye("/admin/users")},e[2]=ye,e[3]=Q):Q=e[3];const ve=Q;let W;e[4]!==t.permissions||e[5]!==l?(W=i=>{l("permissions",t.permissions.includes(i)?t.permissions.filter(o=>o!==i):[...t.permissions,i])},e[4]=t.permissions,e[5]=l,e[6]=W):W=e[6];const be=W;let X;e[7]!==t.permissions||e[8]!==d||e[9]!==l?(X=i=>{const o=d[i].map(as);o.every(c=>t.permissions.includes(c))?l("permissions",t.permissions.filter(c=>!o.includes(c))):l("permissions",[...new Set([...t.permissions,...o])])},e[7]=t.permissions,e[8]=d,e[9]=l,e[10]=X):X=e[10];const Se=X;let Y;e[11]!==_e||e[12]!==l?(Y=()=>{l("permissions",_e)},e[11]=_e,e[12]=l,e[13]=Y):Y=e[13];const Ne=Y;let Z;e[14]!==l?(Z=()=>{l("permissions",[])},e[14]=l,e[15]=Z):Z=e[15];const we=Z,p=t.role==="super_admin";let ee;e[16]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx($e,{title:"Create User"}),e[16]=ee):ee=e[16];let se;e[17]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx($,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(He,{href:"/admin/users",children:s.jsx(es,{className:"h-4 w-4"})})}),e[17]=se):se=e[17];let te;e[18]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsxs("div",{className:"flex items-center gap-4",children:[se,s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(ss,{className:"h-6 w-6"}),"Create User"]}),s.jsx("p",{className:"text-muted-foreground",children:"Add a new user and assign their permissions"})]})]}),e[18]=te):te=e[18];let le;e[19]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs(De,{children:[s.jsx(Ie,{children:"User Information"}),s.jsx(ze,{children:"Basic details about the user"})]}),e[19]=le):le=e[19];let ie;e[20]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(m,{htmlFor:"name",children:"Full Name *"}),e[20]=ie):ie=e[20];let h;e[21]!==l?(h=i=>l("name",i.target.value),e[21]=l,e[22]=h):h=e[22];const Ce=r.name?"border-red-500":"";let f;e[23]!==t.name||e[24]!==h||e[25]!==Ce?(f=s.jsx(O,{id:"name",value:t.name,onChange:h,className:Ce}),e[23]=t.name,e[24]=h,e[25]=Ce,e[26]=f):f=e[26];let x;e[27]!==r.name?(x=r.name&&s.jsx("p",{className:"text-sm text-red-500",children:r.name}),e[27]=r.name,e[28]=x):x=e[28];let u;e[29]!==f||e[30]!==x?(u=s.jsxs("div",{className:"space-y-2",children:[ie,f,x]}),e[29]=f,e[30]=x,e[31]=u):u=e[31];let re;e[32]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(m,{htmlFor:"email",children:"Email Address *"}),e[32]=re):re=e[32];let j;e[33]!==l?(j=i=>l("email",i.target.value),e[33]=l,e[34]=j):j=e[34];const ke=r.email?"border-red-500":"";let g;e[35]!==t.email||e[36]!==j||e[37]!==ke?(g=s.jsx(O,{id:"email",type:"email",value:t.email,onChange:j,className:ke}),e[35]=t.email,e[36]=j,e[37]=ke,e[38]=g):g=e[38];let _;e[39]!==r.email?(_=r.email&&s.jsx("p",{className:"text-sm text-red-500",children:r.email}),e[39]=r.email,e[40]=_):_=e[40];let y;e[41]!==g||e[42]!==_?(y=s.jsxs("div",{className:"space-y-2",children:[re,g,_]}),e[41]=g,e[42]=_,e[43]=y):y=e[43];let ae;e[44]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(m,{htmlFor:"phone",children:"Phone Number"}),e[44]=ae):ae=e[44];let v;e[45]!==l?(v=i=>l("phone",i.target.value),e[45]=l,e[46]=v):v=e[46];let b;e[47]!==t.phone||e[48]!==v?(b=s.jsxs("div",{className:"space-y-2",children:[ae,s.jsx(O,{id:"phone",value:t.phone,onChange:v,placeholder:"+91 98765 43210"})]}),e[47]=t.phone,e[48]=v,e[49]=b):b=e[49];let oe;e[50]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Be,{}),e[50]=oe):oe=e[50];let ne;e[51]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(m,{htmlFor:"password",children:"Password *"}),e[51]=ne):ne=e[51];let S;e[52]!==l?(S=i=>l("password",i.target.value),e[52]=l,e[53]=S):S=e[53];const Ae=r.password?"border-red-500":"";let N;e[54]!==t.password||e[55]!==S||e[56]!==Ae?(N=s.jsx(O,{id:"password",type:"password",value:t.password,onChange:S,className:Ae}),e[54]=t.password,e[55]=S,e[56]=Ae,e[57]=N):N=e[57];let w;e[58]!==r.password?(w=r.password&&s.jsx("p",{className:"text-sm text-red-500",children:r.password}),e[58]=r.password,e[59]=w):w=e[59];let C;e[60]!==N||e[61]!==w?(C=s.jsxs("div",{className:"space-y-2",children:[ne,N,w]}),e[60]=N,e[61]=w,e[62]=C):C=e[62];let ce;e[63]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(m,{htmlFor:"password_confirmation",children:"Confirm Password *"}),e[63]=ce):ce=e[63];let k;e[64]!==l?(k=i=>l("password_confirmation",i.target.value),e[64]=l,e[65]=k):k=e[65];let A;e[66]!==t.password_confirmation||e[67]!==k?(A=s.jsxs("div",{className:"space-y-2",children:[ce,s.jsx(O,{id:"password_confirmation",type:"password",value:t.password_confirmation,onChange:k})]}),e[66]=t.password_confirmation,e[67]=k,e[68]=A):A=e[68];let P;e[69]!==u||e[70]!==y||e[71]!==b||e[72]!==C||e[73]!==A?(P=s.jsxs(Le,{children:[le,s.jsxs(Re,{className:"space-y-4",children:[u,y,b,oe,C,A]})]}),e[69]=u,e[70]=y,e[71]=b,e[72]=C,e[73]=A,e[74]=P):P=e[74];let me;e[75]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsxs(De,{children:[s.jsx(Ie,{children:"Role & Status"}),s.jsx(ze,{children:"Assign a role and set account status"})]}),e[75]=me):me=e[75];let de;e[76]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(m,{htmlFor:"role",children:"Role *"}),e[76]=de):de=e[76];const Me=t.role;let U;e[77]!==l?(U=i=>l("role",i),e[77]=l,e[78]=U):U=e[78];const Pe=r.role?"border-red-500":"";let pe;e[79]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(Ke,{placeholder:"Select a role"}),e[79]=pe):pe=e[79];let F;e[80]!==Pe?(F=s.jsx(Qe,{className:Pe,children:pe}),e[80]=Pe,e[81]=F):F=e[81];let L;e[82]!==ge?(L=ge.map(is),e[82]=ge,e[83]=L):L=e[83];let D;e[84]!==L?(D=s.jsx(We,{children:L}),e[84]=L,e[85]=D):D=e[85];let I;e[86]!==t.role||e[87]!==U||e[88]!==F||e[89]!==D?(I=s.jsxs(Xe,{value:Me,onValueChange:U,children:[F,D]}),e[86]=t.role,e[87]=U,e[88]=F,e[89]=D,e[90]=I):I=e[90];let z;e[91]!==r.role?(z=r.role&&s.jsx("p",{className:"text-sm text-red-500",children:r.role}),e[91]=r.role,e[92]=z):z=e[92];let R;e[93]!==p?(R=p&&s.jsx("p",{className:"text-sm text-amber-600",children:"⚠️ Super Admin has full access to all modules"}),e[93]=p,e[94]=R):R=e[94];let B;e[95]!==I||e[96]!==z||e[97]!==R?(B=s.jsxs("div",{className:"space-y-2",children:[de,I,z,R]}),e[95]=I,e[96]=z,e[97]=R,e[98]=B):B=e[98];let he;e[99]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Be,{}),e[99]=he):he=e[99];let fe;e[100]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(m,{children:"Account Status"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"User can only login if active"})]}),e[100]=fe):fe=e[100];let E;e[101]!==l?(E=i=>l("is_active",i),e[101]=l,e[102]=E):E=e[102];let H;e[103]!==t.is_active||e[104]!==E?(H=s.jsxs("div",{className:"flex items-center justify-between",children:[fe,s.jsx(Je,{checked:t.is_active,onCheckedChange:E})]}),e[103]=t.is_active,e[104]=E,e[105]=H):H=e[105];let M;e[106]!==B||e[107]!==H?(M=s.jsxs(Le,{children:[me,s.jsxs(Re,{className:"space-y-4",children:[B,he,H]})]}),e[106]=B,e[107]=H,e[108]=M):M=e[108];let G;e[109]!==P||e[110]!==M?(G=s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[P,M]}),e[109]=P,e[110]=M,e[111]=G):G=e[111];let T;e[112]!==t.permissions||e[113]!==we||e[114]!==d||e[115]!==p||e[116]!==Ne||e[117]!==Se||e[118]!==be?(T=!p&&s.jsxs(Le,{children:[s.jsx(De,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ie,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Module Permissions"]}),s.jsx(ze,{children:"Select which admin modules this user can access"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{type:"button",variant:"outline",size:"sm",onClick:Ne,children:"Select All"}),s.jsx($,{type:"button",variant:"outline",size:"sm",onClick:we,children:"Deselect All"})]})]})}),s.jsx(Re,{children:s.jsx("div",{className:"space-y-6",children:Object.entries(d).map(i=>{const[o,Fe]=i,c=Fe.map(ls),Ee=c.filter(n=>t.permissions.includes(n)).length,Ge=Ee===c.length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:[o,s.jsxs("span",{className:"ml-2 text-xs font-normal",children:["(",Ee,"/",c.length,")"]})]}),s.jsx($,{type:"button",variant:"ghost",size:"sm",onClick:()=>Se(o),children:Ge?"Deselect All":"Select All"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Fe.map(n=>s.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${t.permissions.includes(n.key)?"bg-primary/5 border-primary":"hover:bg-muted/50"}`,children:[s.jsx(qe,{checked:t.permissions.includes(n.key),onCheckedChange:()=>be(n.key)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm",children:n.name}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:n.description})]})]},n.key))}),s.jsx(Be,{})]},o)})})})]}),e[112]=t.permissions,e[113]=we,e[114]=d,e[115]=p,e[116]=Ne,e[117]=Se,e[118]=be,e[119]=T):T=e[119];let xe;e[120]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx($,{variant:"outline",asChild:!0,children:s.jsx(He,{href:"/admin/users",children:"Cancel"})}),e[120]=xe):xe=e[120];let ue;e[121]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(ts,{className:"mr-2 h-4 w-4"}),e[121]=ue):ue=e[121];const Ue=K?"Creating...":"Create User";let V;e[122]!==K||e[123]!==Ue?(V=s.jsxs("div",{className:"flex justify-end gap-4",children:[xe,s.jsxs($,{type:"submit",disabled:K,children:[ue,Ue]})]}),e[122]=K,e[123]=Ue,e[124]=V):V=e[124];let je;return e[125]!==ve||e[126]!==G||e[127]!==T||e[128]!==V?(je=s.jsxs(Oe,{children:[ee,s.jsxs("div",{className:"space-y-6",children:[te,s.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[G,T,V]})]})]}),e[125]=ve,e[126]=G,e[127]=T,e[128]=V,e[129]=je):je=e[129],je}function ls(a){return a.key}function is(a){return s.jsx(Ye,{value:a.name,children:a.name.replace("_"," ").replace(/\b\w/g,rs)},a.id)}function rs(a){return a.toUpperCase()}function as(a){return a.key}export{Ws as default};
