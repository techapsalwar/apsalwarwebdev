import{c as Z,j as t,r as X,L as Y,a as _,H as Se}from"./app-Cmq9oDGi.js";import{A as we}from"./app-layout-DoVO_vzw.js";import{B as n}from"./button-Cf4oe_XG.js";import{I as ke}from"./input-CJJo5L_5.js";import{B as xe}from"./badge-B7t43j3u.js";import{c as ce,d as oe,C as Ae,a as De,b as _e,e as Te}from"./card-X8yrq1E7.js";import{c as he,d as pe,a as $,S as fe,b as ue}from"./select-MDq58P37.js";import{d as $e,c as Ee,e as ze,g as Ie,f as Fe,h as He,b as Pe,A as Ue}from"./alert-dialog-D5vPuSRT.js";import{R as Le,C as Oe,a as Be}from"./index-CR_WFNu7.js";import{A as Me,a as Re,b as Ve}from"./avatar-XGiuVYGe.js";import{U as me,A as qe,S as Ge}from"./x-HfyhX8Ju.js";import{P as ge}from"./plus-CX2v85UT.js";import{a as Je,C as Ke}from"./chevron-up-08YVdQiA.js";import{U as Qe}from"./user-plus-Dp-3D79s.js";import{S as We}from"./square-pen-BIQygcGa.js";import{E as Xe}from"./eye-off-vGWujgza.js";import{E as Ye}from"./eye-B9qCQXIl.js";import{T as Ze}from"./trash-2-DfEL4ZSA.js";import{S as et}from"./search-CM4xpWys.js";import{S as tt}from"./star-CyatTZkq.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./index-DHA2i0B2.js";import"./image-DO4yfKR-.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";import"./index-CJgzQKWL.js";import"./check-z4pC7DcM.js";import"./index-Caa2gN9W.js";function st(r){const e=Z.c(4);let a;e[0]!==r?({...a}=r,e[0]=r,e[1]=a):a=e[1];let s;return e[2]!==a?(s=t.jsx(Le,{"data-slot":"collapsible",...a}),e[2]=a,e[3]=s):s=e[3],s}function at(r){const e=Z.c(4);let a;e[0]!==r?({...a}=r,e[0]=r,e[1]=a):a=e[1];let s;return e[2]!==a?(s=t.jsx(Oe,{"data-slot":"collapsible-trigger",...a}),e[2]=a,e[3]=s):s=e[3],s}function lt(r){const e=Z.c(4);let a;e[0]!==r?({...a}=r,e[0]=r,e[1]=a):a=e[1];let s;return e[2]!==a?(s=t.jsx(Be,{"data-slot":"collapsible-content",...a}),e[2]=a,e[3]=s):s=e[3],s}const rt=[{title:"Dashboard",href:"/dashboard"},{title:"Committees",href:"/admin/committees"}],je={smc:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",academic:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",administrative:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",student_welfare:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",examination:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",discipline:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",pta:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",other:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};function it(r){return r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}function nt(r){const e=r.toLowerCase();return e.includes("chairman")||e.includes("president")?tt:e.includes("principal")||e.includes("secretary")?qe:Ge}function ls(r){const e=Z.c(81),{committees:a,filters:s,types:o}=r,[m,be]=X.useState(s.search),[ee,te]=X.useState(!1),[T,de]=X.useState(null);let E;e[0]===Symbol.for("react.memo_cache_sentinel")?(E=new Set,e[0]=E):E=e[0];const[c,ve]=X.useState(E);let z;e[1]!==s.active||e[2]!==s.type||e[3]!==m?(z=l=>{l.preventDefault(),_.get("/admin/committees",{search:m,type:s.type,active:s.active},{preserveState:!0,preserveScroll:!0})},e[1]=s.active,e[2]=s.type,e[3]=m,e[4]=z):z=e[4];const se=z;let I;e[5]!==s.active||e[6]!==s.search||e[7]!==s.type?(I=(l,i)=>{_.get("/admin/committees",{search:s.search,type:s.type,active:s.active,[l]:i==="all"?"":i},{preserveState:!0,preserveScroll:!0})},e[5]=s.active,e[6]=s.search,e[7]=s.type,e[8]=I):I=e[8];const d=I;let F;e[9]===Symbol.for("react.memo_cache_sentinel")?(F=l=>{_.delete(`/admin/committees/${l}`,{onSuccess:()=>{te(!1),de(null)}})},e[9]=F):F=e[9];const Ne=F;let H;e[10]===Symbol.for("react.memo_cache_sentinel")?(H=l=>{de(l),te(!0)},e[10]=H):H=e[10];const ye=H,Ce=mt;let P;e[11]!==c?(P=l=>{const i=new Set(c);i.has(l)?i.delete(l):i.add(l),ve(i)},e[11]=c,e[12]=P):P=e[12];const ae=P;let U;e[13]!==o?(U=l=>o.find(i=>i.value===l)?.label||l,e[13]=o,e[14]=U):U=e[14];const le=U;let L;e[15]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(Se,{title:"Committees - APS Alwar Admin"}),e[15]=L):L=e[15];let O;e[16]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Committees"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage school committees and their members."})]}),e[16]=O):O=e[16];let B;e[17]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[O,t.jsx(n,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:t.jsxs(Y,{href:"/admin/committees/create",children:[t.jsx(ge,{className:"mr-2 h-4 w-4"}),"Add Committee"]})})]}),e[17]=B):B=e[17];let M;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(et,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[18]=M):M=e[18];let R;e[19]===Symbol.for("react.memo_cache_sentinel")?(R=l=>be(l.target.value),e[19]=R):R=e[19];let x;e[20]!==m?(x=t.jsxs("div",{className:"relative",children:[M,t.jsx(ke,{placeholder:"Search committees...",value:m,onChange:R,className:"pl-9"})]}),e[20]=m,e[21]=x):x=e[21];let h;e[22]!==se||e[23]!==x?(h=t.jsx("form",{onSubmit:se,className:"flex-1",children:x}),e[22]=se,e[23]=x,e[24]=h):h=e[24];const re=s.type||"all";let p;e[25]!==d?(p=l=>d("type",l),e[25]=d,e[26]=p):p=e[26];let V;e[27]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(he,{className:"w-[180px]",children:t.jsx(pe,{placeholder:"Type"})}),e[27]=V):V=e[27];let q;e[28]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx($,{value:"all",children:"All Types"}),e[28]=q):q=e[28];let f;e[29]!==o?(f=o.map(ot),e[29]=o,e[30]=f):f=e[30];let u;e[31]!==f?(u=t.jsxs(fe,{children:[q,f]}),e[31]=f,e[32]=u):u=e[32];let g;e[33]!==re||e[34]!==p||e[35]!==u?(g=t.jsxs(ue,{value:re,onValueChange:p,children:[V,u]}),e[33]=re,e[34]=p,e[35]=u,e[36]=g):g=e[36];const ie=s.active||"all";let j;e[37]!==d?(j=l=>d("active",l),e[37]=d,e[38]=j):j=e[38];let G;e[39]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(he,{className:"w-[120px]",children:t.jsx(pe,{placeholder:"Status"})}),e[39]=G):G=e[39];let J;e[40]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs(fe,{children:[t.jsx($,{value:"all",children:"All Status"}),t.jsx($,{value:"1",children:"Active"}),t.jsx($,{value:"0",children:"Inactive"})]}),e[40]=J):J=e[40];let b;e[41]!==ie||e[42]!==j?(b=t.jsxs(ue,{value:ie,onValueChange:j,children:[G,J]}),e[41]=ie,e[42]=j,e[43]=b):b=e[43];let v;e[44]!==g||e[45]!==b?(v=t.jsxs("div",{className:"flex gap-2",children:[g,b]}),e[44]=g,e[45]=b,e[46]=v):v=e[46];let N;e[47]!==h||e[48]!==v?(N=t.jsx(ce,{children:t.jsx(oe,{className:"pt-6",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[h,v]})})}),e[47]=h,e[48]=v,e[49]=N):N=e[49];let y;e[50]!==a.data||e[51]!==c||e[52]!==s.active||e[53]!==s.search||e[54]!==s.type||e[55]!==le||e[56]!==ae?(y=a.data.length===0?t.jsx(ce,{children:t.jsxs(oe,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(me,{className:"h-12 w-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No committees found"}),t.jsx("p",{className:"text-muted-foreground text-center mb-4",children:s.search||s.type||s.active?"Try adjusting your filters.":"Get started by adding your first committee."}),!s.search&&!s.type&&!s.active&&t.jsx(n,{asChild:!0,children:t.jsxs(Y,{href:"/admin/committees/create",children:[t.jsx(ge,{className:"mr-2 h-4 w-4"}),"Add Committee"]})})]})}):t.jsx("div",{className:"space-y-4",children:a.data.map(l=>t.jsx(st,{open:c.has(l.id),onOpenChange:()=>ae(l.id),children:t.jsxs(ce,{className:`${l.is_active?"":"opacity-60"}`,children:[t.jsx(Ae,{className:"pb-2",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(De,{className:"text-xl",children:l.name}),t.jsx(xe,{className:je[l.type]||je.other,children:le(l.type)}),!l.is_active&&t.jsx(xe,{variant:"secondary",children:"Hidden"})]}),l.session&&t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Session: ",l.session]}),l.description&&t.jsx(_e,{className:"mt-2",children:l.description})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(at,{asChild:!0,children:t.jsxs(n,{variant:"ghost",size:"sm",children:[t.jsx(me,{className:"mr-2 h-4 w-4"}),l.members.length," Members",c.has(l.id)?t.jsx(Je,{className:"ml-2 h-4 w-4"}):t.jsx(Ke,{className:"ml-2 h-4 w-4"})]})})})]})}),t.jsx(lt,{children:t.jsx(oe,{className:"pt-4 border-t",children:l.members.length===0?t.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[t.jsx(me,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No members added yet."}),t.jsx(n,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:t.jsxs(Y,{href:`/admin/committees/${l.id}/edit`,children:[t.jsx(Qe,{className:"mr-2 h-4 w-4"}),"Add Members"]})})]}):t.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:l.members.map(ct)})})}),t.jsxs(Te,{className:"border-t pt-4 flex gap-2",children:[t.jsx(n,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:t.jsxs(Y,{href:`/admin/committees/${l.id}/edit`,children:[t.jsx(We,{className:"mr-1 h-4 w-4"}),"Edit"]})}),t.jsx(n,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Ce(l.id),children:l.is_active?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{className:"mr-1 h-4 w-4"}),"Hide"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ye,{className:"mr-1 h-4 w-4"}),"Show"]})}),t.jsxs(n,{variant:"outline",size:"sm",className:"flex-1 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>ye(l),children:[t.jsx(Ze,{className:"mr-1 h-4 w-4"}),"Delete"]})]})]})},l.id))}),e[50]=a.data,e[51]=c,e[52]=s.active,e[53]=s.search,e[54]=s.type,e[55]=le,e[56]=ae,e[57]=y):y=e[57];let C;e[58]!==a.data.length||e[59]!==a.links||e[60]!==a.meta?(C=a.data.length>0&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(a.meta.current_page-1)*a.meta.per_page+1," to"," ",Math.min(a.meta.current_page*a.meta.per_page,a.meta.total)," of"," ",a.meta.total," committees"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(n,{variant:"outline",size:"sm",disabled:!a.links.prev,onClick:()=>_.get(a.links.prev),children:"Previous"}),t.jsx(n,{variant:"outline",size:"sm",disabled:!a.links.next,onClick:()=>_.get(a.links.next),children:"Next"})]})]}),e[58]=a.data.length,e[59]=a.links,e[60]=a.meta,e[61]=C):C=e[61];let S;e[62]!==N||e[63]!==y||e[64]!==C?(S=t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[B,N,y,C]}),e[62]=N,e[63]=y,e[64]=C,e[65]=S):S=e[65];let K;e[66]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx($e,{children:"Delete Committee?"}),e[66]=K):K=e[66];const ne=T?.name;let w;e[67]!==ne?(w=t.jsxs(Ee,{children:[K,t.jsxs(ze,{children:['This will permanently delete "',ne,'" and all its members. This action cannot be undone.']})]}),e[67]=ne,e[68]=w):w=e[68];let Q;e[69]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(Ie,{children:"Cancel"}),e[69]=Q):Q=e[69];let k;e[70]!==T?(k=t.jsxs(Fe,{children:[Q,t.jsx(He,{onClick:()=>T&&Ne(T.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]}),e[70]=T,e[71]=k):k=e[71];let A;e[72]!==w||e[73]!==k?(A=t.jsxs(Pe,{children:[w,k]}),e[72]=w,e[73]=k,e[74]=A):A=e[74];let D;e[75]!==ee||e[76]!==A?(D=t.jsx(Ue,{open:ee,onOpenChange:te,children:A}),e[75]=ee,e[76]=A,e[77]=D):D=e[77];let W;return e[78]!==S||e[79]!==D?(W=t.jsxs(we,{breadcrumbs:rt,children:[L,S,D]}),e[78]=S,e[79]=D,e[80]=W):W=e[80],W}function ct(r){const e=nt(r.designation);return t.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${r.is_active?"":"opacity-50"}`,children:[t.jsxs(Me,{className:"h-10 w-10",children:[r.photo?t.jsx(Re,{src:`/storage/${r.photo}`,alt:r.name}):null,t.jsx(Ve,{className:"bg-amber-100 text-amber-700 text-sm",children:it(r.name)})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-sm truncate",children:r.name}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[t.jsx(e,{className:"h-3 w-3"}),t.jsx("span",{className:"truncate",children:r.designation})]}),r.organization&&t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.organization})]})]},r.id)}function ot(r){return t.jsx($,{value:r.value,children:r.label},r.value)}function mt(r){_.post(`/admin/committees/${r}/toggle-active`)}export{ls as default};
