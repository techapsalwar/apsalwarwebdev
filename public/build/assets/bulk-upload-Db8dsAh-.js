import{c as ye,r as fe,u as Ne,j as s,H as Ce,a as Se}from"./app-lLew-mq0.js";import{A as ve}from"./app-layout-KzQEyLiQ.js";import{B as ce}from"./button-DTZ67Z4b.js";import{c as Q,d as W,C as ne,a as oe,b as he}from"./card-DWcOyhKP.js";import{A as xe,a as pe,b as ue}from"./alert-CtEuE1ev.js";import{C as we}from"./circle-check-big-Dc6Llj5D.js";import{T as ke}from"./triangle-alert-DKXBBTIL.js";import{U as je}from"./upload-BrYG0zcL.js";import{D as Fe}from"./download-CX4nki1j.js";import{F as Te}from"./file-check-UDYRRxCK.js";/* empty css            */import"./index-BiNrCjIr.js";import"./index-CMRMG5Mo.js";import"./index-B9jue-Th.js";import"./index-CZQ422QV.js";import"./Combination-BEW_kzWa.js";import"./index-BzAksq8r.js";import"./index-BOY9t191.js";import"./index-CxACbU5U.js";import"./x-CV1yhBJZ.js";import"./index-C7YjzNVQ.js";import"./index-DI1PiJH0.js";import"./index-CbiHmYlh.js";import"./index-DTTikWjI.js";import"./avatar-DYrdvPax.js";import"./index-BTFUtR64.js";import"./index-DHA2i0B2.js";import"./image-CHvhAmHJ.js";import"./link-D-JBfegL.js";import"./quote-DLUiA_F1.js";import"./newspaper-D3mdqZcT.js";import"./megaphone-BG2hP5oS.js";import"./indian-rupee-Bj1qYK0P.js";import"./folder-l-97kfum.js";import"./handshake-V1wEucA7.js";import"./school-BjNRgEiN.js";function xs(ee){const e=ye.c(75),{flash:l}=ee,[w,be]=fe.useState(""),[k,_e]=fe.useState("");let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F={csv_file:null,zip_file:null},e[0]=F):F=e[0];const{data:me,setData:r,post:se,processing:de,errors:t,progress:S}=Ne(F);let T;e[1]===Symbol.for("react.memo_cache_sentinel")?(T=[{title:"Dashboard",href:"/dashboard"},{title:"Transfer Certificates",href:"/admin/tc-records"},{title:"Bulk Upload",href:"/admin/tc-records/bulk-upload"}],e[1]=T):T=e[1];const ge=T;let D;e[2]!==se?(D=v=>{v.preventDefault(),se("/admin/tc-records/bulk-upload",{forceFormData:!0})},e[2]=se,e[3]=D):D=e[3];const le=D;let P;e[4]!==r?(P=v=>{const i=v.target.files?.[0];i&&(r("csv_file",i),be(i.name))},e[4]=r,e[5]=P):P=e[5];const te=P;let z;e[6]!==r?(z=v=>{const i=v.target.files?.[0];i&&(r("zip_file",i),_e(i.name))},e[6]=r,e[7]=z):z=e[7];const ie=z;let U;e[8]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(Ce,{title:"Bulk Upload Transfer Certificates"}),e[8]=U):U=e[8];let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(je,{className:"h-6 w-6"}),"Bulk Upload Transfer Certificates"]}),s.jsx("p",{className:"text-gray-500",children:"Upload multiple TC records using CSV and ZIP files"})]}),e[9]=B):B=e[9];let a;e[10]!==l?(a=l?.success&&s.jsxs(xe,{className:"mb-6 border-green-500 bg-green-50",children:[s.jsx(we,{className:"h-4 w-4 text-green-600"}),s.jsx(pe,{className:"text-green-800",children:"Success"}),s.jsx(ue,{className:"text-green-700",children:l.success})]}),e[10]=l,e[11]=a):a=e[11];let c;e[12]!==l?(c=l?.bulk_errors&&l.bulk_errors.length>0&&s.jsxs(xe,{className:"mb-6 border-yellow-500 bg-yellow-50",children:[s.jsx(ke,{className:"h-4 w-4 text-yellow-600"}),s.jsx(pe,{className:"text-yellow-800",children:"Some records were skipped"}),s.jsx(ue,{className:"text-yellow-700",children:s.jsxs("ul",{className:"list-disc ml-4 mt-2",children:[l.bulk_errors.slice(0,10).map(Pe),l.bulk_errors.length>10&&s.jsxs("li",{children:["... and ",l.bulk_errors.length-10," more errors"]})]})})]}),e[12]=l,e[13]=c):c=e[13];let I;e[14]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(ne,{children:s.jsx(oe,{children:"Instructions"})}),e[14]=I):I=e[14];let Z;e[15]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("strong",{children:"Download the CSV template"}),e[15]=Z):Z=e[15];let V,A;e[16]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsxs("li",{children:[Z," to see the required format.",s.jsx(ce,{asChild:!0,variant:"link",size:"sm",className:"ml-2 p-0 h-auto",children:s.jsxs("a",{href:"/admin/tc-records/download-template",children:[s.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Download Template"]})})]}),A=s.jsx("strong",{children:"Fill in the CSV file"}),e[16]=V,e[17]=A):(V=e[16],A=e[17]);let M,E;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsxs("li",{children:[A," with student information. Each row should have:",s.jsx("code",{className:"block mt-1 p-2 bg-gray-100 rounded text-xs",children:"tc_number, student_name, father_name, admission_number, class, date_of_issue, pdf_filename"})]}),E=s.jsx("strong",{children:"Create a ZIP file"}),e[18]=M,e[19]=E):(M=e[18],E=e[19]);let Y;e[20]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsxs("ol",{className:"list-decimal ml-4 space-y-2 text-sm text-gray-600",children:[V,M,s.jsxs("li",{children:[E," containing all the TC PDF files. The filenames must match exactly with the ",s.jsx("code",{children:"pdf_filename"})," column in the CSV."]}),s.jsx("li",{children:'Upload both files below and click "Upload Transfer Certificates".'})]}),e[20]=Y):Y=e[20];let H;e[21]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Important Notes"}),e[21]=H):H=e[21];let R;e[22]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs(Q,{children:[I,s.jsxs(W,{className:"space-y-4",children:[Y,s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[H,s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Date format should be YYYY-MM-DD (e.g., 2025-03-15)"}),s.jsx("li",{children:"• PDF filenames in CSV should include the .pdf extension"}),s.jsx("li",{children:"• PDFs can be in subdirectories within the ZIP file"}),s.jsx("li",{children:"• Duplicate TC numbers will be skipped"}),s.jsx("li",{children:"• Maximum ZIP file size: 100MB"})]})]})]})]}),e[22]=R):R=e[22];let $;e[23]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs(ne,{children:[s.jsx(oe,{children:"Step 1: Upload CSV File"}),s.jsx(he,{children:"The CSV file containing student information"})]}),e[23]=$):$=e[23];let n;e[24]!==te?(n=s.jsx("input",{type:"file",id:"csv_file",accept:".csv,.txt",onChange:te,className:"hidden"}),e[24]=te,e[25]=n):n=e[25];let q;e[26]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(Te,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e[26]=q):q=e[26];let o;e[27]!==w?(o=s.jsx("p",{className:"text-sm text-gray-600",children:w?s.jsx("span",{className:"text-green-600 font-medium",children:w}):s.jsx(s.Fragment,{children:s.jsx("span",{className:"text-primary font-medium",children:"Click to upload CSV"})})}),e[27]=w,e[28]=o):o=e[28];let L;e[29]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or TXT file (max 2MB)"}),e[29]=L):L=e[29];let m;e[30]!==o?(m=s.jsxs("label",{htmlFor:"csv_file",className:"cursor-pointer",children:[q,o,L]}),e[30]=o,e[31]=m):m=e[31];let d;e[32]!==n||e[33]!==m?(d=s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n,m]}),e[32]=n,e[33]=m,e[34]=d):d=e[34];let f;e[35]!==t.csv_file?(f=t.csv_file&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:t.csv_file}),e[35]=t.csv_file,e[36]=f):f=e[36];let h;e[37]!==d||e[38]!==f?(h=s.jsxs(Q,{children:[$,s.jsxs(W,{children:[d,f]})]}),e[37]=d,e[38]=f,e[39]=h):h=e[39];let X;e[40]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(ne,{children:[s.jsx(oe,{children:"Step 2: Upload ZIP File"}),s.jsx(he,{children:"The ZIP file containing all TC PDF documents"})]}),e[40]=X):X=e[40];let x;e[41]!==ie?(x=s.jsx("input",{type:"file",id:"zip_file",accept:".zip",onChange:ie,className:"hidden"}),e[41]=ie,e[42]=x):x=e[42];let G;e[43]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(je,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e[43]=G):G=e[43];let p;e[44]!==k?(p=s.jsx("p",{className:"text-sm text-gray-600",children:k?s.jsx("span",{className:"text-green-600 font-medium",children:k}):s.jsx(s.Fragment,{children:s.jsx("span",{className:"text-primary font-medium",children:"Click to upload ZIP"})})}),e[44]=k,e[45]=p):p=e[45];let J;e[46]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ZIP file containing PDFs (max 100MB)"}),e[46]=J):J=e[46];let u;e[47]!==p?(u=s.jsxs("label",{htmlFor:"zip_file",className:"cursor-pointer",children:[G,p,J]}),e[47]=p,e[48]=u):u=e[48];let j;e[49]!==x||e[50]!==u?(j=s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[x,u]}),e[49]=x,e[50]=u,e[51]=j):j=e[51];let b;e[52]!==t.zip_file?(b=t.zip_file&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:t.zip_file}),e[52]=t.zip_file,e[53]=b):b=e[53];let _;e[54]!==j||e[55]!==b?(_=s.jsxs(Q,{children:[X,s.jsxs(W,{children:[j,b]})]}),e[54]=j,e[55]=b,e[56]=_):_=e[56];let g;e[57]!==S?(g=S&&s.jsx(Q,{children:s.jsx(W,{className:"py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Uploading..."}),s.jsxs("span",{children:[S.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all",style:{width:`${S.percentage}%`}})})]})})}),e[57]=S,e[58]=g):g=e[58];let K;e[59]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(ce,{type:"button",variant:"outline",onClick:De,children:"Cancel"}),e[59]=K):K=e[59];const re=de||!me.csv_file||!me.zip_file,ae=de?"Processing...":"Upload Transfer Certificates";let y;e[60]!==re||e[61]!==ae?(y=s.jsxs("div",{className:"flex gap-4 justify-end",children:[K,s.jsx(ce,{type:"submit",disabled:re,children:ae})]}),e[60]=re,e[61]=ae,e[62]=y):y=e[62];let N;e[63]!==h||e[64]!==_||e[65]!==g||e[66]!==y?(N=s.jsxs("div",{className:"space-y-6",children:[R,h,_,g,y]}),e[63]=h,e[64]=_,e[65]=g,e[66]=y,e[67]=N):N=e[67];let C;e[68]!==le||e[69]!==N?(C=s.jsx("form",{onSubmit:le,children:N}),e[68]=le,e[69]=N,e[70]=C):C=e[70];let O;return e[71]!==C||e[72]!==a||e[73]!==c?(O=s.jsxs(ve,{breadcrumbs:ge,children:[U,s.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[B,a,c,C]})]}),e[71]=C,e[72]=a,e[73]=c,e[74]=O):O=e[74],O}function De(){return Se.get("/admin/tc-records")}function Pe(ee,e){return s.jsx("li",{children:ee},e)}export{xs as default};
