import{r as t,u as Y,j as e,H as z,L as F,a as j}from"./app-Cmq9oDGi.js";import{A as G}from"./app-layout-DoVO_vzw.js";import{B as n}from"./button-Cf4oe_XG.js";import{c as d,C as h,a as m,d as p,b as q}from"./card-X8yrq1E7.js";import{I as Q}from"./input-CJJo5L_5.js";import{L as o}from"./label-DJa8iKFL.js";import{T as K}from"./textarea-CwjQz9xo.js";import{b as g,c as v,d as f,S as y,a as x}from"./select-MDq58P37.js";import{S as W}from"./switch-C474g68b.js";import{A as X,a as Z,b as ee,c as se,d as ae,e as re,f as te,g as le,h as ie}from"./alert-dialog-D5vPuSRT.js";import{A as _}from"./arrow-left-D1AIGgPf.js";import{S as oe}from"./save-CXYQgcZY.js";import{U as P}from"./upload-BhALOVoL.js";import{I as ce}from"./image-DO4yfKR-.js";import{T as ne}from"./trash-2-DfEL4ZSA.js";/* empty css            */import"./index-CWF-aD8F.js";import"./index-uM6iNYTc.js";import"./index-7JW2xj0O.js";import"./index-DyFFqtbr.js";import"./Combination-NTvMx_hL.js";import"./index-BZSQ9xrA.js";import"./index-DvAkvJaB.js";import"./index-CJXivgjO.js";import"./x-HfyhX8Ju.js";import"./index-C9wRH-1q.js";import"./index-D_u97ceG.js";import"./index-BQQBJX9w.js";import"./index-CghxG9km.js";import"./avatar-XGiuVYGe.js";import"./index-Caa2gN9W.js";import"./index-DHA2i0B2.js";import"./link-CZ3Nda4c.js";import"./quote-RHalnNgg.js";import"./newspaper-BNdRHAAi.js";import"./megaphone-D5LK33hs.js";import"./indian-rupee-n2MNJtU2.js";import"./file-check-Cs6It4z_.js";import"./folder-B56i9kPD.js";import"./handshake-TJFmC-Ix.js";import"./school-D_aABbcu.js";import"./index-CJgzQKWL.js";import"./chevron-up-08YVdQiA.js";import"./check-z4pC7DcM.js";const de=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}];function ss({album:a}){const[b,T]=t.useState(a.cover_image?`/storage/${a.cover_image}`:null),[N,C]=t.useState(!1),[$,u]=t.useState(!1),D=t.useRef(null),S=t.useRef(null),I=new Date().getFullYear(),L=Array.from({length:10},(s,r)=>I-r),U=[{title:"Dashboard",href:"/dashboard"},{title:"Photo Albums",href:"/admin/albums"},{title:"Edit",href:`/admin/albums/${a.slug}/edit`}],{data:i,setData:l,post:E,processing:w,errors:A}=Y({_method:"PUT",title:a.title,description:a.description||"",cover_image:null,year:a.year?.toString()||"",month:a.month?.toString()||"",status:a.status,is_featured:a.is_featured}),R=s=>{s.preventDefault(),E(`/admin/albums/${a.slug}`,{forceFormData:!0})},O=s=>{const r=s.target.files?.[0];if(r){l("cover_image",r);const c=new FileReader;c.onloadend=()=>{T(c.result)},c.readAsDataURL(r)}},k=async s=>{if(!s||s.length===0)return;C(!0);const r=new FormData;Array.from(s).forEach(c=>{r.append("photos[]",c)}),j.post(`/admin/albums/${a.slug}/photos`,r,{forceFormData:!0,onFinish:()=>C(!1),preserveScroll:!0})},B=t.useCallback(s=>{s.preventDefault(),u(!1),k(s.dataTransfer.files)},[]),H=t.useCallback(s=>{s.preventDefault(),u(!0)},[]),J=t.useCallback(s=>{s.preventDefault(),u(!1)},[]),M=s=>{j.delete(`/admin/albums/${a.slug}/photos/${s}`,{preserveScroll:!0})},V=s=>{j.post(`/admin/albums/${a.slug}/photos/${s}/set-cover`,{},{preserveScroll:!0})};return e.jsxs(G,{breadcrumbs:U,children:[e.jsx(z,{title:`Edit Album - ${a.title}`}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(F,{href:"/admin/albums",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Album"}),e.jsx("p",{className:"text-gray-500",children:a.title})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("form",{onSubmit:R,children:e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(m,{children:"Album Details"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Album Title *"}),e.jsx(Q,{id:"title",value:i.title,onChange:s=>l("title",s.target.value),placeholder:"e.g., Annual Sports Day 2024",required:!0}),A.title&&e.jsx("p",{className:"text-sm text-red-500",children:A.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(K,{id:"description",value:i.description,onChange:s=>l("description",s.target.value),placeholder:"Describe the event or occasion...",rows:4})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"year",children:"Year"}),e.jsxs(g,{value:i.year,onValueChange:s=>l("year",s),children:[e.jsx(v,{children:e.jsx(f,{placeholder:"Select year"})}),e.jsx(y,{children:L.map(s=>e.jsx(x,{value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"month",children:"Month"}),e.jsxs(g,{value:i.month,onValueChange:s=>l("month",s),children:[e.jsx(v,{children:e.jsx(f,{placeholder:"Select month"})}),e.jsx(y,{children:de.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"status",children:"Status"}),e.jsxs(g,{value:i.status,onValueChange:s=>l("status",s),children:[e.jsx(v,{children:e.jsx(f,{})}),e.jsxs(y,{children:[e.jsx(x,{value:"draft",children:"Draft"}),e.jsx(x,{value:"published",children:"Published"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Featured Album"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Show in gallery highlights"})]}),e.jsx(W,{checked:i.is_featured,onCheckedChange:s=>l("is_featured",s)})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(n,{type:"submit",disabled:w,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),w?"Saving...":"Save Changes"]})})]})]})}),e.jsxs(d,{children:[e.jsxs(h,{children:[e.jsxs(m,{children:["Photos (",a.photos.length,")"]}),e.jsx(q,{children:"Upload photos by clicking the upload area or drag and drop"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${$?"border-primary bg-primary/5":"hover:border-primary"} ${N?"opacity-50 pointer-events-none":""}`,onClick:()=>S.current?.click(),onDrop:B,onDragOver:H,onDragLeave:J,children:[e.jsx(P,{className:"h-10 w-10 mx-auto text-gray-400"}),e.jsx("p",{className:"text-gray-600 mt-2",children:N?"Uploading...":"Click or drag photos here to upload"}),e.jsx("p",{className:"text-sm text-gray-400",children:"PNG, JPG, GIF up to 5MB each"})]}),e.jsx("input",{ref:S,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:s=>k(s.target.files)}),a.photos.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4",children:a.photos.map(s=>e.jsxs("div",{className:"relative group aspect-square",children:[e.jsx("img",{src:`/storage/${s.thumbnail_path||s.path}`,alt:s.alt_text||s.filename,className:"w-full h-full object-cover rounded-lg"}),a.cover_image===s.path&&e.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded",children:"Cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>V(s.id),title:"Set as cover",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs(X,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Delete Photo?"}),e.jsx(re,{children:"This will permanently delete this photo."})]}),e.jsxs(te,{children:[e.jsx(le,{children:"Cancel"}),e.jsx(ie,{onClick:()=>M(s.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(m,{children:"Cover Image"})}),e.jsxs(p,{children:[e.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:border-primary transition-colors",onClick:()=>D.current?.click(),children:b?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:b,alt:"Cover",className:"w-full h-32 object-cover rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to change"})]}):e.jsxs("div",{className:"py-4",children:[e.jsx(P,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Upload cover"})]})}),e.jsx("input",{ref:D,type:"file",accept:"image/*",className:"hidden",onChange:O})]})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(m,{children:"Quick Stats"})}),e.jsxs(p,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Total Photos"}),e.jsx("span",{className:"font-medium",children:a.photos.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`font-medium ${a.status==="published"?"text-green-600":"text-gray-600"}`,children:a.status==="published"?"Published":"Draft"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Featured"}),e.jsx("span",{className:"font-medium",children:a.is_featured?"Yes":"No"})]})]})]}),e.jsx(n,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs(F,{href:"/admin/albums",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Back to Albums"]})})]})]})]})]})}export{ss as default};
